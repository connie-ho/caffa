(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{128:function(e,t,a){e.exports={"coffees-page":"Coffees_coffees-page__30OE1","region-search-input":"Coffees_region-search-input__1BCci","no-results":"Coffees_no-results__CEH72"}},19:function(e,t,a){e.exports={"coffee-details-wrapper":"Coffee_coffee-details-wrapper__5V81h","coffee-details-section":"Coffee_coffee-details-section__1qExE","coffee-details-img":"Coffee_coffee-details-img__3OE-F","coffee-details-name":"Coffee_coffee-details-name__1XVuT","coffee-details-brand":"Coffee_coffee-details-brand__6Q9Tx","coffee-details-region":"Coffee_coffee-details-region__BJWN9","coffee-details-rating":"Coffee_coffee-details-rating__3FpkS","coffee-details-description":"Coffee_coffee-details-description__OoDyz","coffee-like-icon":"Coffee_coffee-like-icon__p1YAp","coffee-unlike-icon":"Coffee_coffee-unlike-icon__2lW9u","coffee-characteristic-section":"Coffee_coffee-characteristic-section__2kBlJ",characteristic:"Coffee_characteristic__2Gxpd",icon:"Coffee_icon__Plymg","coffee-review-wrapper":"Coffee_coffee-review-wrapper__2aPcO","coffee-review-heading":"Coffee_coffee-review-heading__1R3ow","coffee-review-section":"Coffee_coffee-review-section__3HSNH","coffee-review-list":"Coffee_coffee-review-list__12SU-","no-reviews":"Coffee_no-reviews__2i-zt","coffee-review-stars":"Coffee_coffee-review-stars__1UeJl","coffee-review-user-info":"Coffee_coffee-review-user-info__1-Yr8","coffee-review-date":"Coffee_coffee-review-date__2AveA","coffee-review-rating":"Coffee_coffee-review-rating__1HLmA","coffee-cafe-section":"Coffee_coffee-cafe-section__3BcW2","map-info":"Coffee_map-info__2b2iR"}},214:function(e,t,a){},238:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(18),c=a.n(r),s=a(8),o=a(24),l=a(311),d=a(11),j=n.a.createContext(),u=a(17),b=a(290),f=a(15),m=a(303),h=a(301),O=a(302),p=a(248),x=a(48),g=a(300),v=a(182),y=a(158),w=a.n(y),C=a(90),_=a.n(C),S=a(159),N=a.n(S),k=a(127),R=a.n(k),F=a(64),T=a.n(F),E=a(82),D=a(297),I=a(291),B=a(296),P=a(294),L=a(293),z=a(295),A=a(152),W=a.n(A),H=(a(214),a(251)),M=a(1),q=function(e){var t=e.file,a=e.setFile,n=e.error,r=e.setError,c=Object(H.a)((function(){return{AddHoverColor:{"&:hover":{background:"white",color:"#f7bc2c"}},transform:{transform:"translate(0px, 6rem)",color:"#3d3a3a"}}}))(),o=Object(i.useState)(""),l=Object(s.a)(o,2),d=l[0],j=l[1],u=["image/png","image/jpeg"],b=function(e){var t=e.target.files[0];t&&u.includes(t.type)?(a(t),j(URL.createObjectURL(e.target.files[0])),r("")):(a(null),r("Please select an image file(png or jpeg)"))};return Object(M.jsx)("form",{children:Object(M.jsxs)("label",{className:"file-upload",children:[!d&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("input",{type:"file",accept:"image/*",capture:!0,onChange:b}),Object(M.jsx)(W.a,{color:"primary",className:c.transform,classes:{root:c.AddHoverColor},fontSize:"large"})]}),t&&Object(M.jsx)("div",{className:"output",children:d&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("input",{type:"file",accept:"image/*",capture:!0,onChange:b}),Object(M.jsx)("img",{src:d,alt:"cafe",width:"200",height:"200"})," "]})}),n&&Object(M.jsx)("div",{className:"error",children:n})]})})},U=a(113),Y=(a(245),a(246),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_API_KEY,authDomain:"project-test-123-84049.firebaseapp.com",projectId:"project-test-123-84049",storageBucket:"project-test-123-84049.appspot.com",messagingSenderId:"224670135033",appId:"1:224670135033:web:d466d7377803e19abb2828"});U.a.initializeApp(Y);var G=U.a.storage(),K=(U.a.firestore(),a(21)),V=a.n(K);function Z(e){return J.apply(this,arguments)}function J(){return(J=Object(E.a)(T.a.mark((function e(t){var a,i,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({requests:[{features:[{type:"TEXT_DETECTION",maxResults:10}],image:{source:{imageUri:t}}}]}),i="",e.prev=2,e.next=5,V.a.post("/api/search",{body:a});case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(i&&!i.data.error){e.next=15;break}return e.abrupt("return",["error"]);case 15:if(0!==Object.keys(i.data).length){e.next=19;break}return e.abrupt("return",[]);case 19:return n=i.data.textAnnotations.map((function(e){return e.description})),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var X=n.a.createContext();function $(e){var t=Object(i.useContext)(X),a=(t.results,t.setResults),n=Object(i.useState)(null),r=Object(s.a)(n,2),c=r[0],l=r[1],d=Object(i.useState)(null),j=Object(s.a)(d,2),u=j[0],f=j[1],m=Object(i.useState)(""),h=Object(s.a)(m,2),O=h[0],p=h[1],g=Object(i.useState)(!1),v=Object(s.a)(g,2),y=v[0],w=v[1],C=Object(i.useState)(null),_=Object(s.a)(C,2),S=(_[0],_[1]),N=Object(i.useState)([]),k=Object(s.a)(N,2),R=(k[0],k[1]),F=Object(o.f)();Object(i.useEffect)((function(){if(u){w(!0);var e=G.ref(u.name);e.put(u).on("state_changed",(function(e){}),(function(e){p(e)}),Object(E.a)(T.a.mark((function t(){var i,n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDownloadURL();case 2:return i=t.sent,t.next=5,Z(i);case 5:return n=t.sent,S(i),R(n),t.next=10,a({url:i,textArray:n});case 10:localStorage.setItem("url",i),localStorage.setItem("textarray",n),w(!1),F.push("/search"),W(!1);case 15:case"end":return t.stop()}}),t)}))))}}),[u]);var A=e.open,W=e.setOpen,H=function(){W(!1)},U=Object(b.a)({centreAlignDialogActions:{justifyContent:"center"},paper:{overflow:"auto",maxHeight:"700px",height:450,width:400,alignItems:"center"},content:{overflow:"auto",display:"flex",flexDirection:"column",justifyContent:"space-between",height:300,width:300,alignItems:"center",border:"1px dotted black"},loading:{transform:"translate(0em, 0rem)"},dialogTitle:{root:{fontSize:"2em"}}})();return Object(M.jsx)("div",{children:Object(M.jsxs)(I.a,{classes:{paper:U.paper},open:A,onClose:H,"aria-labelledby":"form-dialog-title",children:[Object(M.jsx)(L.a,{id:"form-dialog-title",children:Object(M.jsxs)(x.a,{variant:"h6",style:{fontSize:"1.5em"},children:[" ","Image Search"," "]})}),Object(M.jsxs)(P.a,{className:U.content,children:[Object(M.jsx)(q,{file:c,setFile:l,error:O,setError:p,loading:y}),y&&Object(M.jsx)(z.a,{color:"primary",style:{position:"center"}})]}),Object(M.jsxs)(B.a,{classes:{root:U.centreAlignDialogActions},children:[Object(M.jsx)(D.a,{variant:"outlined",onClick:H,style:{fontSize:"1.0em",margin:"0.5rem"},color:"primary",children:"Cancel"}),Object(M.jsx)(D.a,{variant:"outlined",onClick:function(){!function(e){e?f(e):p("File not selected")}(c)},style:{fontSize:"1.0em",margin:"0.5rem"},color:"primary",children:"Search"})]})]})})}var Q=a(9),ee=a(183),te=a(328),ae=n.a.createContext(),ie=a(189);function ne(e){var t=Object(i.useContext)(ae).state,a=Object.values(t.coffees),n=Object(i.useState)(!1),r=Object(s.a)(n,2),c=r[0],o=r[1],l=Object(i.useState)(""),j=Object(s.a)(l,2),u=j[0],f=(j[1],Object(b.a)((function(e){var t;return{inputRoot:{color:"inherit"},inputInput:Object(d.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),autoComplete:(t={border:"1px solid #d3d3d3",borderRadius:"2rem"},Object(d.a)(t,e.breakpoints.up("xs"),{width:"30ch"}),Object(d.a)(t,e.breakpoints.up("sm"),{width:"90ch"}),t)}}))());return Object(M.jsx)(te.a,{id:"Search Bar",options:a,className:f.autoComplete,getOptionLabel:function(e){return"".concat(e.brand," ").concat(e.name)},open:c,onInputChange:function(e,t,a){switch(a){case"input":o(!!t);break;case"reset":case"clear":o(!1)}},onBlur:function(){o(!1)},onFocus:function(){u&&o(!0)},noOptionsText:"We can't find your coffee! Try our image search!",renderInput:function(e){e.InputLabelProps,e.InputProps;var t=Object(ee.a)(e,["InputLabelProps","InputProps"]);return Object(M.jsx)(ie.a,Object(Q.a)(Object(Q.a)({placeholder:"Search\u2026",value:u,classes:{root:f.inputRoot,input:f.inputInput}},e.InputProps),t))},renderOption:function(e){return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("span",{style:{cursor:"pointer",backgroundColor:"transparent"},onClick:function(){window.location.href="/coffees/".concat(e.id)},onKeyDown:function(){window.location.href="/coffees/".concat(e.id)},children:Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(M.jsx)("img",{src:e.image_url,height:100,width:100,style:{marginRight:"1em"},alt:e.name}),Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"},children:[Object(M.jsx)("p",{children:e.brand}),Object(M.jsx)("p",{style:{marginTop:"-10px"},children:e.name})]})]})})})}})}var re=a.p+"static/media/Caffa2.ec9cae0b.png",ce=a(116),se=a(157),oe=a.n(se),le=Object(b.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},appBar:{padding:"0.5rem 0.5rem",maxWidth:"100%",zIndex:e.zIndex.drawer+1,alignItems:"center"},title:Object(d.a)({display:"none"},e.breakpoints.up("sm"),{display:"block",marginLeft:20}),allCoffee:Object(d.a)({display:"none"},e.breakpoints.up("sm"),{display:"block",marginLeft:0,marginRight:"2em"}),search:Object(d.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(f.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(f.c)(e.palette.common.white,.25)},marginLeft:e.spacing(1)},e.breakpoints.up("sm"),{marginRight:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},imageIcon:Object(d.a)({marginRight:"1.5em"},e.breakpoints.up("md"),{marginRight:"3em"}),inputInput:Object(d.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(d.a)({display:"none"},e.breakpoints.up("md"),{display:"flex",marginLeft:"1.5em"}),sectionMobile:Object(d.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),mobileMenu:{marginRight:e.spacing(1)},toolbar:e.mixins.toolbar}}));function de(e){var t=le(),a=n.a.useState(null),r=Object(s.a)(a,2),c=r[0],o=r[1],l=n.a.useState(null),d=Object(s.a)(l,2),b=d[0],f=d[1],y=Boolean(c),C=Boolean(b),S=n.a.useState(!1),k=Object(s.a)(S,2),F=k[0],T=k[1],E=Object(i.useContext)(j).user,D=e.logoutHandler,I=function(e){o(e.currentTarget)},B=function(){T(!0),f(null)},P=function(){f(null)},L=function(){o(null),P()},z="primary-search-account-menu",A=Object(M.jsxs)(v.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:z,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:y,onClose:L,children:[E&&Object(M.jsx)(g.a,{onClick:L,children:Object(M.jsx)(u.b,{to:"/account",children:"My Account"})}),E&&Object(M.jsx)(g.a,{onClick:L,children:Object(M.jsx)(u.b,{to:"/account/favourites",children:"Favourited Coffee"})}),E&&Object(M.jsx)(g.a,{onClick:L,children:Object(M.jsx)(u.b,{to:"/account/reviews",children:"Reviewed Coffee"})}),E&&Object(M.jsx)(g.a,{onClick:L,children:Object(M.jsx)(u.b,{to:"/account/settings",children:"Settings"})}),Object(M.jsx)(g.a,{onClick:L,children:E?Object(M.jsx)(u.b,{onClick:D,children:"Logout"}):Object(M.jsx)(u.b,{to:"/login",children:"Login"})})]}),W=Object(M.jsx)($,{open:F,setOpen:T}),H="primary-search-account-menu-mobile",q=Object(M.jsxs)(v.a,{className:t.mobileMenu,anchorEl:b,anchorOrigin:{vertical:"top",horizontal:"right"},id:H,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:C,onClose:P,children:[Object(M.jsx)(g.a,{onClick:I,children:Object(M.jsx)(p.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(M.jsx)(_.a,{})})}),Object(M.jsx)(g.a,{onClick:B,children:Object(M.jsx)(p.a,{"aria-label":"image-search","aria-controls":"image-search","aria-haspopup":"true",color:"inherit",children:Object(M.jsx)(R.a,{})})}),Object(M.jsx)(g.a,{onClick:L,children:Object(M.jsx)(p.a,{"aria-label":"all-coffeescoffees","aria-controls":"all-coffees","aria-haspopup":"true",color:"inherit",children:Object(M.jsxs)(u.c,{to:"/coffees",children:[Object(M.jsx)(oe.a,{})," "]})})})]});return Object(M.jsxs)("div",{className:t.grow,children:[Object(M.jsx)(h.a,{elevation:2,position:"fixed",className:t.appBar,style:{background:"#FFFFFF"},children:Object(M.jsxs)(O.a,{children:[Object(M.jsx)(u.b,{to:"/",className:t.imageIcon,style:{width:"50px"},children:Object(M.jsx)(m.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer",size:"small",children:Object(M.jsx)("img",{src:re,width:"60",height:"50",alt:"caffa"})})}),Object(M.jsx)(u.b,{to:"/coffees",children:Object(M.jsx)(x.a,{className:t.allCoffee,variant:"body2",noWrap:!0,children:"COFFEES"})}),Object(M.jsxs)("div",{className:t.search,children:[Object(M.jsx)("div",{className:t.searchIcon,children:Object(M.jsx)(w.a,{})}),Object(M.jsx)(ne,{})]}),Object(M.jsx)("div",{className:t.grow}),Object(M.jsxs)("div",{className:t.sectionDesktop,children:[Object(M.jsx)(p.a,{edge:"end","aria-label":"camera","aria-controls":z,"aria-haspopup":"true",onClick:B,color:"inherit",children:Object(M.jsx)(R.a,{})}),E&&Object(M.jsx)(p.a,{edge:"end","aria-label":"account of current user","aria-controls":z,"aria-haspopup":"true",onClick:I,color:"inherit",children:Object(M.jsx)(_.a,{})})]}),Object(M.jsx)("div",{className:t.sectionMobile,children:Object(M.jsx)(p.a,{"aria-label":"show more","aria-controls":H,"aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},color:"inherit",children:Object(M.jsx)(N.a,{})})}),Object(M.jsx)("div",{children:E?null:Object(M.jsx)(u.b,{to:"/login",children:Object(M.jsx)(x.a,{className:t.title,variant:"body2",noWrap:!0,children:"LOGIN"})})})]})}),q,A,W,Object(M.jsx)(ce.a,{children:Object(M.jsx)("div",{className:t.toolbar})})]})}var je=a(338),ue=a(305),be=a(340),fe=a(310),me=a(332),he=a(312),Oe=a(108),pe=a.n(Oe),xe=a(304),ge=a(160),ve=a.n(ge),ye=a(161),we=a.n(ye),Ce=a(309),_e=a(333),Se=a(334),Ne=a(308),ke=a(6),Re=Object(b.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"100%"},container:{alignSelf:"center",minHeight:"90vh"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Fe(e){var t=Re(),a=Object(i.useContext)(j),n=a.loginHandler,r=a.setOpenLogin,c=Object(i.useState)(""),d=Object(s.a)(c,2),u=d[0],b=d[1],f=Object(i.useState)(""),m=Object(s.a)(f,2),h=m[0],O=m[1],g=Object(i.useState)({showPassword:!1}),v=Object(s.a)(g,2),y=v[0],w=v[1],C=Object(o.f)();return Object(M.jsxs)(xe.a,{component:"main",maxWidth:"xs",className:t.container,children:[Object(M.jsx)(ue.a,{}),Object(M.jsxs)("div",{className:t.paper,children:[Object(M.jsx)(je.a,{className:t.avatar,children:Object(M.jsx)(pe.a,{})}),Object(M.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(M.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault(),n(u,h).then((function(){"/login"!==C.location.pathname?C.go():C.push("/"),r((function(e){return!1}))}))},children:[Object(M.jsx)(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:u,onInput:function(e){return b(e.target.value)}}),Object(M.jsxs)(Ne.a,{className:Object(ke.a)(t.textField),variant:"outlined",children:[Object(M.jsx)(Se.a,{htmlFor:"outlined-adornment-password",children:"Password*"}),Object(M.jsx)(_e.a,{label:"Password",required:!0,fullWidth:!0,name:"password",type:y.showPassword?"text":"password",id:"password",autoComplete:"current-password",value:h,onInput:function(e){return O(e.target.value)},endAdornment:Object(M.jsx)(Ce.a,{position:"end",children:Object(M.jsx)(p.a,{"aria-label":"toggle password visibility",onClick:function(){w(Object(Q.a)(Object(Q.a)({},y),{},{showPassword:!y.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end",children:y.showPassword?Object(M.jsx)(ve.a,{}):Object(M.jsx)(we.a,{})})}),labelWidth:70})]}),Object(M.jsx)(fe.a,{control:Object(M.jsx)(me.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(M.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",className:t.submit,children:"Sign In"}),Object(M.jsxs)(l.a,{container:!0,children:[Object(M.jsx)(l.a,{item:!0,xs:!0,children:Object(M.jsx)(he.a,{to:"/register",color:"secondary",children:"Don't have a profile? Click here to register!"})}),Object(M.jsx)(l.a,{item:!0})]})]})]})]})}var Te=a(313),Ee=a(314),De=a(316),Ie=a(315),Be=a.p+"static/media/31080.89da34dd.png",Pe=Object(b.a)((function(e){return{root:{margin:"0 auto",width:300,height:400,borderTop:"1px solid rgb(238,238,238)",borderRadius:"2%",transition:"transform 0.15s ease-in-out","&:hover":{transform:"scale3d(1.05, 1.05, 1)",background:"transparent"}},media:{height:275,backgroundSize:"contain"},cardContent:{height:175},description:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}}));var Le=function(e){var t=Pe(),a=e.coffee;return Object(M.jsx)(Te.a,{className:t.root,children:Object(M.jsx)(Ee.a,{children:Object(M.jsxs)(u.b,{to:"/coffees/".concat(a.id),children:[Object(M.jsx)(Ie.a,{className:t.media,image:a.image_url}),Object(M.jsxs)(De.a,{className:t.cardContent,children:[Object(M.jsx)(x.a,{color:"secondary",variant:"h6",style:{fontSize:"1rem",fontWeight:300},component:"h6",children:a.brand}),Object(M.jsx)(x.a,{variant:"h2",style:{fontSize:"1.3rem"},component:"h2",children:a.name}),Object(M.jsxs)(x.a,{color:"secondary",gutterBottom:!0,variant:"subtitle1",style:{fontSize:"1.0em",padding:"10 10",color:"#646264"},component:"h3",children:[a.region,","," ",a.avg_rating?a.avg_rating:"No Ratings Yet!"," ",a.avg_rating&&Object(M.jsx)("img",{src:Be,alt:"bean",style:{height:"15px",width:"15px"}})]})]})]})})})},ze=a(327),Ae=function(e){for(var t=e.coffeesPerPage,a=e.totalCoffees,i=e.page,n=e.setPage,r=[],c=1;c<=Math.ceil(a/t);c++)r.push(c);return Object(M.jsx)(ze.a,{style:{margin:"1em"},color:"primary",boundaryCount:2,count:r[r.length-1],page:i,onChange:function(e,t){n(t)}})},We=function(e){var t=e.coffees,a=Object(i.useState)(1),n=Object(s.a)(a,2),r=n[0],c=n[1],d=Object(i.useState)(9),j=Object(s.a)(d,2),u=j[0],b=(j[1],r*u),f=b-u,m=t.slice(f,b).map((function(e){return Object(M.jsx)(l.a,{item:!0,xs:12,sm:8,md:6,lg:4,style:{padding:"1.5em 1.5em"},children:Object(M.jsx)(Le,{coffee:e},e.id)})}));return Object(M.jsxs)(o.c,{children:[Object(M.jsx)(o.a,{path:"/coffees/:id"}),Object(M.jsx)(o.a,{path:"/coffees",children:Object(M.jsxs)(l.a,{item:!0,container:!0,direction:"row",style:{marginTop:"5rem",minHeight:"80vh"},children:[Object(M.jsx)(l.a,{item:!0,xs:0,sm:1}),Object(M.jsx)(l.a,{item:!0,xs:12,sm:10,children:Object(M.jsxs)(l.a,{container:!0,spacing:"0",children:[m,Object(M.jsx)(l.a,{container:!0,xs:12,justify:"center",children:Object(M.jsx)(Ae,{page:r,setPage:c,coffeesPerPage:u,totalCoffees:t.length})})]})}),Object(M.jsx)(l.a,{item:!0,xs:0,sm:1})]})})]})},He=a(129),Me=Object(b.a)((function(e){return{root:Object(d.a)({margin:"0 auto",width:300,height:400,borderTop:"1px solid rgb(238,238,238)",borderRadius:"2%",transition:"transform 0.15s ease-in-out","&:hover":{transform:"scale3d(1.05, 1.05, 1)",background:"transparent"}},e.breakpoints.down("sm"),{width:235,height:450}),media:{height:275,backgroundSize:"contain"},cardContent:{height:175},description:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}}));var qe=function(e){var t=Me(),a=e.coffee;return Object(M.jsx)(Te.a,{className:t.root,children:Object(M.jsx)(Ee.a,{children:Object(M.jsxs)(u.b,{to:"/coffees/".concat(a.id),children:[Object(M.jsx)(Ie.a,{className:t.media,image:a.image_url}),Object(M.jsxs)(De.a,{className:t.cardContent,children:[Object(M.jsx)(x.a,{color:"secondary",variant:"h6",style:{fontSize:"1rem",fontWeight:300},component:"h6",children:a.brand}),Object(M.jsx)(x.a,{variant:"h2",style:{fontSize:"1.3rem"},component:"h2",children:a.name}),Object(M.jsxs)(x.a,{color:"secondary",gutterBottom:!0,variant:"subtitle1",style:{fontSize:"1.0em",padding:"10 10",color:"#646264"},component:"h3",children:[a.region,","," ",a.avg_rating?a.avg_rating:"No Ratings Yet!"," ",a.avg_rating&&Object(M.jsx)("img",{src:Be,style:{height:"15px",width:"15px"},alt:"bean"})]})]})]})})})},Ue=a(23);function Ye(e,t){var a,i=[],n=Object(Ue.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;r&&Number(r.coffee_id)===Number(t)&&i.push(r)}}catch(c){n.e(c)}finally{n.f()}return i}function Ge(e){if(e.length){if(1===e.length)return Number(e[0].rating);var t,a=0,i=Object(Ue.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a+=Number(n.rating)}}catch(r){i.e(r)}finally{i.f()}return Math.round(a/e.length*10)/10}}function Ke(e,t){var a,i=Object(Ue.a)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(n.user_id===t)return n.id}}catch(r){i.e(r)}finally{i.f()}return null}function Ve(e,t,a){var i=[];if(!Ze(a))return e;if(!e.length)return i;for(var n in a)if(a[n]&&a[n].length){var r,c=Object(Ue.a)(e);try{for(c.s();!(r=c.n()).done;){var s,o=r.value,l=Object(Ue.a)(a[n]);try{for(l.s();!(s=l.n()).done;){var d=s.value;o[n]===t[n].items[d].type&&i.push(o)}}catch(j){l.e(j)}finally{l.f()}}}catch(j){c.e(j)}finally{c.f()}return a[n]=[],Ve(i,t,a)}}function Ze(e){for(var t=0,a=Object.values(e);t<a.length;t++){if(a[t].length)return!0}return!1}function Je(e,t){var a,i={},n=t,r=Object(Ue.a)(e);try{for(r.s();!(a=r.n()).done;){var c=a.value;i[n]={id:n,type:c},n+=1}}catch(s){r.e(s)}finally{r.f()}return i}a(238);var Xe=function(e){var t=Object(i.useContext)(ae).state,a=e.homeCoffees,n=e.type,r=t.reviews,c=[{width:1,itemsToShow:1,itemsToScroll:1,pagination:!1},{width:500,itemsToShow:2,itemsToScroll:1,pagination:!0},{width:1e3,itemsToShow:3,itemsToScroll:1,pagination:!0},{width:1300,itemsToShow:4,itemsToScroll:2,pagination:!0},{width:1600,itemsToShow:5,itemsToScroll:2,pagination:!0}],s=Object.values(a).map((function(e){var t=Ge(Ye(Object.values(r),e.id));return Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(qe,{coffee:e,avgRating:t},e.id)})})),o=Object.values(t.coffees).sort((function(e,t){return t.avg_rating-e.avg_rating})).slice(0,6).map((function(e){var t=Ge(Ye(Object.values(r),e.id));return Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(qe,{coffee:e,avgRating:t},e.name)})}));return"favorite"===n?Object(M.jsx)(He.a,{itemPadding:[30,10],breakPoints:c,children:s}):"rating"===n?Object(M.jsx)(He.a,{itemPadding:[30,10],breakPoints:c,children:o}):void 0},$e=a(54),Qe=a.n($e);function et(e){var t=e.userid,a=e.number,n=e.img,r=e.description,c=Object(i.useContext)(ae).state,s=Object.values(c.users),o=Object.values(c.coffees)[a-1],l=s[t-1];return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:Qe.a["editor-coffee-card"],children:[Object(M.jsx)("img",{className:Qe.a["editor-coffee-image"],alt:"coffee",src:o&&o.image_url}),Object(M.jsx)("div",{className:Qe.a.imgover,children:Object(M.jsx)("a",{href:o&&"/coffees/".concat(o.id),children:Object(M.jsxs)("div",{className:Qe.a["editor-details-section"],children:[Object(M.jsx)("h2",{className:Qe.a["coffee-details-brand"],children:o&&o.brand}),Object(M.jsx)("h2",{className:Qe.a["coffee-details-name"],children:o&&o.name}),Object(M.jsx)("p",{className:Qe.a["coffee-details-paragraph"],children:r}),Object(M.jsx)("h2",{className:Qe.a["coffee-details-chosen"],children:"Chosen by:"}),Object(M.jsx)("h2",{className:Qe.a["coffee-details-person"],children:l&&"".concat(l.first_name," ").concat(l.last_name)}),Object(M.jsx)("div",{className:Qe.a["editor-pic-container"],children:Object(M.jsx)("img",{className:Qe.a["editor-pic"],src:n,alt:"avatar"})})]})})})]})})}var tt=a(167),at=a.n(tt),it=(a(239),Object(b.a)((function(e){return{title:{fontSize:"4.0rem",margin:"0px 20px 0px 20px "},header:{fontSize:"2.5rem",margin:"0 0.5em"},subtitle:{fontSize:"1.5rem",margin:"0 1rem"},paragraph:{fontSize:"1.5rem",margin:"0px 16px 0px 16px"},titleContainer:{margin:"5rem 0rem 11rem 0rem"}}}))),nt=function(e){Object(i.useEffect)((function(){at.a.init({})}),[]);var t=e.homeCoffees,a=it();return Object(M.jsxs)(l.a,{container:!0,direction:"row",children:[Object(M.jsx)(l.a,{item:!0,xs:!1,sm:1}),Object(M.jsxs)(l.a,{item:!0,xs:12,sm:10,children:[Object(M.jsxs)(l.a,{container:!0,direction:"column",style:{margin:"5rem 0rem 11rem 0rem"},children:[Object(M.jsx)(x.a,{variant:"h2",className:a.title,children:"Caffa"}),Object(M.jsx)(x.a,{variant:"h4",className:a.paragraph,children:"Great coffee is a simple joy. Finding the perfect one should be just as simple."})]}),Object(M.jsx)("div",{"data-aos":"fade","data-aos-once":"true",children:Object(M.jsxs)(l.a,{container:!0,direction:"column",children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Editor Picks"}),Object(M.jsx)(x.a,{variant:"h4",className:a.subtitle,gutterBottom:!0,children:"What gets us up in the mornings."}),Object(M.jsxs)(l.a,{container:!0,direction:"row",children:[Object(M.jsx)(l.a,{container:!0,justify:"center",xs:12,sm:6,lg:4,style:{paddingBottom:"1em",paddingTop:"1em"},children:Object(M.jsx)(et,{userid:2,description:"Super versatile and quick to make. Enjoy it as  vietnamese coffee, or whip it with sugar to make dalgona coffee!",number:22,img:"https://avatars.githubusercontent.com/u/66891817?v=4"})}),Object(M.jsx)(l.a,{container:!0,justify:"center",xs:12,sm:6,lg:4,style:{paddingBottom:"1em",paddingTop:"1em"},children:Object(M.jsx)(et,{userid:3,number:20,description:"Keep it simple, like I always say!",img:"https://avatars.githubusercontent.com/u/73570663?v=4"})}),Object(M.jsx)(l.a,{container:!0,justify:"center",xs:12,sm:6,lg:4,style:{paddingBottom:"1em",paddingTop:"1em"},children:Object(M.jsx)(et,{userid:1,number:21,description:"You won't want to miss out on this epic espresso.",img:"https://avatars.githubusercontent.com/u/31554101?v=4"})})]})]})}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsxs)("div",{"data-aos":"fade","data-aos-once":"true",children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Top Favorites"}),Object(M.jsx)(x.a,{variant:"h4",className:a.subtitle,children:"Only the best of the best! Chosen by you."}),Object(M.jsx)(Xe,{homeCoffees:t,type:"favorite",children:" "})]}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsxs)("div",{"data-aos":"fade","data-aos-offset":"650","data-aos-once":"true",children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Top Reviewed"}),Object(M.jsx)(x.a,{variant:"h4",className:a.subtitle,children:"The latest and greatest! Hottest coffees of all time."}),Object(M.jsx)(Xe,{homeCoffees:t,type:"rating",children:" "})]})]}),Object(M.jsx)(l.a,{item:!0,xs:!1,sm:1})]})},rt=a.p+"static/media/cafecropped.07360037.jpg",ct=Object(b.a)((function(e){return{container:{display:"flex",width:"100%",flexDirection:"column",alignItems:"center",zIndex:"-1",objectFit:"cover"},imageContainer:Object(d.a)({display:"flex",position:"relative",flexDirection:"column",backgroundSize:"contain",backgroundRepeat:"no-repeat",overflow:"hidden"},e.breakpoints.down("sm"),{height:"100px"}),image:Object(d.a)({objectFit:"cover",width:"100%",maxHeight:"60vh"},e.breakpoints.down("sm"),{height:"50vh"}),title:Object(d.a)({fontSize:"4rem"},e.breakpoints.up("md"),{display:"inline-block",position:"absolute",margin:"10,10",color:"Black",height:"0",zIndex:1}),subtitle:Object(d.a)({},e.breakpoints.up("md"),{display:"inline-block",top:"65%",color:"Black",textAlign:"center",fontSize:"30px"})}}));function st(){var e=ct();return Object(M.jsxs)(l.a,{item:!0,xs:12,container:!0,className:e.imageContainer,children:[Object(M.jsx)("img",{src:rt,className:e.image,alt:"cafe"}),Object(M.jsx)(l.a,{item:!0})]})}l.a;var ot=function(e){var t=Object(i.useState)({}),a=Object(s.a)(t,2),n=a[0],r=a[1];return Object(i.useEffect)((function(){V.a.get("/api/coffees/popular").then((function(e){r(e.data)})).catch((function(e){console.error(e.message)}))}),[]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(o.a,{path:"/coffees/:id",children:Object(M.jsx)(Le,{})}),Object(M.jsx)(o.a,{path:"/coffees",children:Object(M.jsx)(We,{})}),Object(M.jsx)(o.a,{path:"/",children:Object(M.jsxs)(l.a,{container:!0,direction:"column",children:[Object(M.jsx)(st,{}),Object(M.jsx)(l.a,{item:!0,xs:12}),Object(M.jsx)(nt,{homeCoffees:n,setHomeCoffees:r})]})})]})},lt=a(181),dt=a(317),jt=a(331),ut=Object(b.a)((function(e){return{root:{},selectEmpty:{marginTop:e.spacing(2)},title:{fontSize:"1px"},form:{margin:"0"},imageLabel:{color:"#000000",fontSize:"1em"},dialogAction:{justifyContent:"center"},image:{width:"400px !important",height:"400px !important",objectFit:"contain !important",display:"flex",paddingTop:"1em",paddingBottom:"1em"}}}));function bt(e){var t=ut(),a=e.open,n=e.setOpen,r=e.url,c=e.addCoffee,j=Object(i.useState)({name:"",description:"",region:"",roast:"",brand:"",acidity:"",grain_species:"",image_url:r}),u=Object(s.a)(j,2),b=u[0],f=u[1],m=Object(o.f)(),h=Object(i.useState)({}),O=Object(s.a)(h,2),p=O[0],x=O[1],v=function(){f({name:"",description:"",region:"",roast:"",brand:"",acidity:"",grain_species:""}),x({}),n(!1)},y=function(e){f(Object(Q.a)(Object(Q.a)({},b),{},Object(d.a)({},e.target.name,e.target.value)))};return Object(M.jsxs)(I.a,{fullWidth:!0,maxWidth:"sm",open:a,onClose:v,"aria-labelledby":"form-dialog-title",children:[Object(M.jsx)(L.a,{className:t.title,id:"form-dialog-title",children:"Add Your Coffee"}),Object(M.jsxs)("form",{className:t.form,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){var e={};return e.name=b.name?"":"This field is required",e.description=b.description?"":"This field is required",e.region=b.region?"":"This field is required",e.roast=b.roast?"":"This field is required",e.brand=b.brand?"":"This field is required",e.acidity=b.acidity?"":"This field is required",e.grain_species=b.grain_species?"":"This field is required",x(Object(Q.a)({},e)),Object.values(e).every((function(e){return""===e}))}()&&c(b).then((function(e){m.push("/coffees/".concat(e))}))},children:[Object(M.jsxs)(P.a,{maxWidth:"sm",fullWidth:!0,children:[Object(M.jsx)(dt.a,{children:"Please fill in the fields below to add your coffee."}),Object(M.jsxs)(l.a,{container:!0,direction:"column",spacing:4,children:[Object(M.jsx)(l.a,{item:!0,children:Object(M.jsx)(be.a,Object(Q.a)({autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"name",name:"name",fullWidth:!0,value:b.name||"",onChange:y,required:!0},p.name&&{error:!0,helperText:p.name}))}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsx)(be.a,Object(Q.a)({autoFocus:!0,margin:"dense",id:"brand",label:"Brand",type:"brand",name:"brand",fullWidth:!0,value:b.brand||"",onChange:y,required:!0},p.brand&&{error:!0,helperText:p.brand}))}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsx)(be.a,Object(Q.a)({id:"outlined-multiline-static",label:"Description",multiline:!0,rows:4,variant:"outlined",fullWidth:!0,name:"description",value:b.description||"",onChange:y,required:!0},p.description&&{error:!0,helperText:p.description}))}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsx)(be.a,Object(Q.a)({autoFocus:!0,margin:"dense",id:"region",label:"Region",type:"region",name:"region",value:b.region||"",onChange:y,fullWidth:!0,required:!0},p.region&&{error:!0,helperText:p.region}))}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsxs)(Ne.a,{fullWidth:!0,children:[Object(M.jsx)(Se.a,{id:"roast-label",children:"Roast"}),Object(M.jsxs)(jt.a,Object(Q.a)(Object(Q.a)({labelId:"roast-label",id:"roast",value:b.roast||"",name:"roast",onChange:y,fullWidth:!0,required:!0},p.roast&&{error:!0,helperText:p.roast}),{},{children:[Object(M.jsx)(g.a,{value:"Light",children:"Light"}),Object(M.jsx)(g.a,{value:"Medium",children:"Medium"}),Object(M.jsx)(g.a,{value:"Dark",children:"Dark"})]}))]})}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsxs)(Ne.a,{fullWidth:!0,children:[Object(M.jsx)(Se.a,{id:"acidity-label",children:"Acidity"}),Object(M.jsxs)(jt.a,Object(Q.a)(Object(Q.a)({labelId:"acidity-label",id:"acidity",value:b.acidity||"",name:"acidity",onChange:y,fullWidth:!0,required:!0},p.acidity&&{error:!0,helperText:p.acidity}),{},{children:[Object(M.jsx)(g.a,{value:"Low",children:"Low"}),Object(M.jsx)(g.a,{value:"Low-Medium",children:"Low-Medium"}),Object(M.jsx)(g.a,{value:"Medium",children:"Medium"}),Object(M.jsx)(g.a,{value:"Medium-High",children:"Medium-High"}),Object(M.jsx)(g.a,{value:"High",children:"High"})]}))]})}),Object(M.jsx)(l.a,{item:!0,children:Object(M.jsxs)(Ne.a,{fullWidth:!0,children:[Object(M.jsx)(Se.a,{id:"grain-species-label",children:"Grain Species"}),Object(M.jsxs)(jt.a,Object(Q.a)(Object(Q.a)({labelId:"grain-species-label",id:"grain-species",value:b.grain_species||"",name:"grain_species",onChange:y,fullWidth:!0,required:!0},p.grain_species&&{error:!0,helperText:p.grain_species}),{},{children:[Object(M.jsx)(g.a,{value:"Arabica",children:"Arabica"}),Object(M.jsx)(g.a,{value:"Robusta",children:"Robusta"})]}))]})}),Object(M.jsxs)(l.a,{container:!0,justify:"center",alignItems:"center",children:[Object(M.jsx)("br",{}),Object(M.jsx)("img",{className:t.image,src:r,alt:"coffee"})]})]})]}),Object(M.jsxs)(B.a,{className:t.dialogAction,children:[Object(M.jsx)(D.a,{variant:"outlined",color:"primary",onClick:v,children:"Cancel"}),Object(M.jsx)(D.a,{variant:"outlined",color:"primary",type:"submit",style:{margin:"0.5em"},children:"Add"})]})]})]})}function ft(e){var t=e.url,a=e.addCoffee,n=Object(i.useContext)(j),r=n.user,c=n.setOpenLogin,o=Object(i.useState)(!1),l=Object(s.a)(o,2),d=l[0],u=l[1],f=Object(M.jsx)(bt,{open:d,setOpen:u,url:t,addCoffee:a}),m=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},button:{paddingLeft:"15px",margin:"1em 1em"}}}))();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(D.a,{variant:"outlined",color:"primary",disableRipple:!0,size:"medium",style:{fontSize:"1.25em"},className:m.button,onClick:function(){r?u(!0):c((function(e){return!0}))},children:["Can't find your coffee? click here to add it."," "]}),f]})}var mt=Object(b.a)({header:{padding:"1em",paddingLeft:"15px",fontSize:"2.5em"}});function ht(e){var t=Object(i.useContext)(ae).state,a=Object.values(t.coffees),n=t.reviews,r=e.addCoffee,c=e.results,o=Object(i.useState)(""),d=Object(s.a)(o,2),j=d[0],u=d[1],b=Object(i.useState)([]),f=Object(s.a)(b,2),m=f[0],h=f[1],O=mt();Object(i.useEffect)((function(){u(localStorage.getItem("url")||""),h(localStorage.getItem("textarray")||[])}),[c.url]);var p=new lt.a(a,{isCaseSensitive:!1,includeScore:!0,shouldSort:!0,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.7,distance:100,useExtendedSearch:!1,ignoreLocation:!1,ignoreFieldNorm:!1,keys:["name","brand"]});return Object(M.jsxs)(l.a,{container:!0,direction:"row",children:[Object(M.jsx)(l.a,{item:!0,xs:!1,sm:1}),Object(M.jsxs)(l.a,{item:!0,xs:12,sm:10,children:[Object(M.jsx)(x.a,{variant:"h2",className:O.header,children:"Your search results"}),Object(M.jsx)(l.a,{container:!0,spacing:"5",children:function(){var e="";if(m&&(e=m.toString()),"error"!==e){var t=function(e){var t=new RegExp("\\b"+["coffee","decaf","organic","usda","roast","roasted"].join("|")+"\\b","gi");return e.replace(/\n/g," ").replace(/[.,/#!$%^&*;\xb0\u2022':{}=\-_`~()]/g,"").replace(t,"").toLowerCase()}(e),a=p.search(t,{limit:5});return 0!==a.length?a.map((function(e){var t=Ge(Ye(Object.values(n),e.item.id));return Object(M.jsx)(l.a,{item:!0,xs:12,sm:4,lg:3,children:Object(M.jsx)(Le,{coffee:e.item,avgRating:t},e.item.id)})})):Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(x.a,{variant:"body2",style:{fontSize:"2em",padding:"0.5em"},children:"There were no matches!"})})})}return Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(x.a,{variant:"body2",style:{fontSize:"2em"},children:"There was an error in image search. Your image may not have been detected as a coffee bean bag."})})}()}),Object(M.jsx)("br",{}),j&&Object(M.jsx)(ft,{url:j,addCoffee:r})]}),Object(M.jsx)(l.a,{item:!0,xs:!1,sm:1})]})}var Ot=a(47),pt=n.a.createContext(),xt=a(168),gt=a.n(xt),vt=a(169),yt=a.n(vt),wt=a(110),Ct=a.n(wt),_t=a(114),St=a(19),Nt=a.n(St);function kt(e){var t=e.coffee,a=e.reviews,n=e.favourites,r=e.isLiked,c=Object(i.useContext)(j),o=c.user,l=c.setOpenLogin,d=o?o.id:null,u=Object(i.useContext)(pt),b=u.addFavourite,f=u.deleteFavourite,m=Object(i.useState)(r(n,d)),h=Object(s.a)(m,2),O=h[0],x=h[1];Object(i.useEffect)((function(){x((function(e){return r(n,d)}))}),[n,d,r]);var g=function(e){var t,a=0,i=Object(Ue.a)(e);try{for(i.s();!(t=i.n()).done;)t.value&&(a+=1)}catch(n){i.e(n)}finally{i.f()}return a}(n);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:Nt.a["coffee-details-wrapper"],children:Object(M.jsxs)("div",{className:Nt.a["coffee-details-section"],children:[Object(M.jsx)("img",{src:t.image_url,alt:"".concat(t.name),className:Nt.a["coffee-details-img"]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("h2",{className:Nt.a["coffee-details-brand"],children:t.brand}),Object(M.jsx)("h1",{className:Nt.a["coffee-details-name"],children:t.name}),Object(M.jsxs)("div",{className:Nt.a["coffee-details-region"],children:[Object(M.jsx)(gt.a,{}),Object(M.jsx)("h3",{children:t.region})]}),!t.avg_rating&&"No Reviews Yet!",t.avg_rating&&Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:Nt.a["coffee-details-rating"],children:[Object(M.jsxs)("h1",{children:[t.avg_rating," "]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("img",{src:Be,style:{height:"15px",width:"15px"},alt:"bean"}),Object(M.jsxs)("p",{children:[a.length," ",1===a.length?"Rating":"Ratings"," "]})]})]})}),Object(M.jsx)("p",{className:Nt.a["coffee-details-description"],children:t.description}),Object(M.jsxs)("div",{children:[Object(M.jsxs)(p.a,{type:"submit","aria-label":"delete",onClick:function(e){if(e.preventDefault(),o)return O?(f(O),x((function(e){return!1}))):b(t.id,o.id).then((function(e){x((function(t){return e}))})),!1;l((function(e){return!0}))},children:[O&&Object(M.jsx)(Ct.a,{className:Nt.a["coffee-like-icon"]}),!O&&Object(M.jsx)(yt.a,{className:Nt.a["coffee-unlike-icon"]})]}),g," ",1===g?"like":"likes"]})]})]})}),Object(M.jsxs)("div",{className:Nt.a["coffee-characteristic-section"],children:[Object(M.jsxs)("div",{className:Nt.a.characteristic,children:[Object(M.jsx)("p",{children:"Roast"}),Object(M.jsx)(_t.a,{className:Nt.a.icon,icon:"fire"}),t.roast]}),Object(M.jsxs)("div",{className:Nt.a.characteristic,children:[Object(M.jsx)("p",{children:"Acidity"}),Object(M.jsx)(_t.a,{className:Nt.a.icon,icon:"flask"}),t.acidity]}),Object(M.jsxs)("div",{className:Nt.a.characteristic,children:[Object(M.jsx)("p",{children:"Grain"}),Object(M.jsx)(_t.a,{className:Nt.a.icon,icon:"dna"}),t.grain_species]})]})]})}var Rt=a(91);var Ft=function(e){var t=e.name,a=e.latitude,n=e.longitude,r=[{name:t,location:{lat:a,lng:n},distance:e.distance}],c={lat:a,lng:n},o=Object(i.useState)({}),l=Object(s.a)(o,2),d=l[0],j=l[1];return Object(M.jsx)(Rt.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY,children:Object(M.jsxs)(Rt.a,{mapContainerStyle:{width:"100%",flex:1},zoom:13,center:c,children:[r.map((function(e){return Object(M.jsx)(Rt.d,{position:e.location,onClick:function(){return function(e){j(e)}(e)}},e.name)})),d.location&&Object(M.jsx)(Rt.b,{position:d.location,clickable:!0,onCloseClick:function(){return j({})},children:Object(M.jsxs)("p",{className:Nt.a["map-info"],children:[d.name," is ",d.distance," km away from you!"," "]})})]})})},Tt=Object(b.a)((function(e){return{section:Object(d.a)({display:"flex",flexDirection:"row",paddingTop:0},e.breakpoints.down("sm"),{flexDirection:"column",margin:"0 auto"}),root:{backgroundColor:e.palette.background.secondary,flex:1,minWidth:"40%",padding:"1.5em",marginRight:"1em",borderTop:"1px solid rgb(238,238,238)",borderRadius:"1em"},media:{height:300},img:{padding:0,margin:0},loading:{margin:"2rem auto"}}}));var Et=function(e){var t=e.coffee,a=e.cafeData,n=e.setCafeData,r=Object(i.useState)(!0),c=Object(s.a)(r,2),o=c[0],l=c[1];Object(i.useEffect)((function(){(function(){var e=Object(E.a)(T.a.mark((function e(){var a,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.brand.toLowerCase().split(" ").join("+"),e.next=3,V.a.get("/api/cafes/?brand=".concat(a));case 3:i=e.sent,n((function(e){return i.data})),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,n]);var d=Tt();return Object(M.jsxs)("div",{className:d.section,children:[o&&Object(M.jsx)("div",{className:d.loading,children:Object(M.jsx)(z.a,{color:"primary",style:{position:"center"}})}),a&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Te.a,{className:d.root,children:[Object(M.jsx)(Ie.a,{classes:{img:d.img,root:d.media},image:a.image_url,title:a.name}),Object(M.jsxs)(De.a,{children:[Object(M.jsx)(x.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a.name}),Object(M.jsxs)(x.a,{variant:"body2",color:"textSecondary",component:"p",children:["Rating: ",a.rating," ",Object(M.jsx)("img",{src:Be,style:{height:"15px",width:"15px"},alt:"bean"})]}),Object(M.jsx)(he.a,{href:a.url,children:"See More Details On Yelp"})]})]}),Object(M.jsx)(Ft,{className:d.map,name:a.name,latitude:a.coordinates.latitude,longitude:a.coordinates.longitude,distance:Math.round(a.distance/1e3*10)/10})]})]})},Dt=n.a.createContext();function It(e){var t=e.open,a=e.handleClose,n=e.id,r=Object(i.useContext)(Dt).deleteReview;return Object(M.jsx)("div",{children:Object(M.jsxs)(I.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(M.jsx)(L.a,{id:"alert-dialog-title",children:"Are you sure you want to delete this review?"}),Object(M.jsxs)(B.a,{children:[Object(M.jsx)(D.a,{variant:"outlined",onClick:a,color:"primary",children:"Cancel"}),Object(M.jsx)(D.a,{variant:"outlined",onClick:function(e){e.preventDefault(),r(n),a()},color:"primary",autoFocus:!0,children:"Confirm"})]})]})})}var Bt=a(339),Pt=Object(b.a)((function(e){return{root:{color:e.palette.primary.main,justifySelf:"center"}}}));function Lt(e){var t=Pt(),a=e.handleStarClick,n=e.rating,r=e.setRating,c=Object(i.useState)(n),o=Object(s.a)(c,2),l=(o[0],o[1]);return Object(M.jsx)("div",{className:Nt.a["coffee-review-stars"],children:Object(M.jsx)(Bt.a,{className:t.root,name:"size-large",size:"large",value:n,precision:.5,onChange:function(e,t){r((function(e){return t}))},onChangeActive:function(e,t){l((function(e){return t}))},onClick:a})})}var zt=Object(b.a)((function(e){return{paper:Object(d.a)({display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"1em",margin:"auto 0",border:"0px solid",borderRadius:"1rem",minWidth:"500px",minHeight:"350px"},e.breakpoints.down("sm"),{minWidth:"0",width:"90%"}),content:{display:"flex",flexDirection:"column",justifyContent:"center"}}}));function At(e){var t=zt(),a=e.coffee,i=e.rating,n=e.setRating,r=e.openReviewForm,c=e.description,s=e.setDescription,o=e.handleStarClick,l=e.handleCloseReviewForm,d=e.handleSubmitReviewForm;return Object(M.jsx)("div",{children:Object(M.jsxs)(I.a,{classes:{paper:t.paper},open:r,onClose:l,"aria-labelledby":"form-dialog-title",children:[Object(M.jsxs)(L.a,{id:"form-dialog-title",children:["You're rating ",a.name," by ",a.brand]}),Object(M.jsxs)(P.a,{classes:{root:t.content},children:[Object(M.jsx)(Lt,{rating:i,setRating:n,handleStarClick:o}),Object(M.jsx)(be.a,{multiline:!0,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoFocus:!0,id:"description",name:"description",label:"Say a few words about this coffee",type:"email",value:c,onInput:function(e){return s(e.target.value)}})]}),Object(M.jsxs)(B.a,{children:[Object(M.jsx)(D.a,{variant:"outlined",onClick:l,color:"primary",children:"Cancel"}),Object(M.jsx)(D.a,{variant:"outlined",onClick:d,color:"primary",children:"Submit"})]})]})})}function Wt(e){var t=e.openReviewForm,a=e.setOpenReviewForm,n=e.handleCloseReviewForm,r=e.handleClickOpenReviewForm,c=e.coffee,o=e.review,l=Object(i.useContext)(Dt).editReview,d=Object(i.useState)(o.description),j=Object(s.a)(d,2),u=j[0],b=j[1],f=Object(i.useState)(o.rating),m=Object(s.a)(f,2),h=m[0],O=m[1];return Object(M.jsx)("div",{children:Object(M.jsx)(At,{coffee:c,rating:h,setRating:O,openReviewForm:t,setOpenReviewForm:a,description:u,setDescription:b,handleClickOpenReviewForm:r,handleCloseReviewForm:n,handleSubmitReviewForm:function(e){e.preventDefault(),l({id:o.id,description:u,rating:h}).then((function(){n()}))}})})}var Ht=a(318),Mt=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"1em",maxWidth:"800px",border:"0px solid",borderRadius:"1rem",fontSize:"1.25em",marginBottom:"1em",backgroundColor:e.palette.background.secondary,"&:hover":{transform:"scale3d(1.05, 1.05, 1)",background:"#e0d4a7"}},image:{width:"2em",height:"2em",border:"0px solid",borderRadius:"50%",marginRight:"0.75em"},userInfo:{display:"flex",alignItems:"center",marginTop:"0.5em",fontWeight:600},rating:{background:e.palette.primary.main,border:"1px solid #FCE4A2",borderRadius:"0.5em",padding:"0.2em 0.5em",marginRight:"1em"},bean:{marginLeft:"1em"},button:{marginRight:"1em"},description:{marginTop:"0.5em",wordWrap:"break-word"}}}));function qt(e){var t=Mt(),a=e.review,n=e.reviewUser,r=e.coffee,c=new Date(a.created_at).toDateString().split(" "),o="".concat(c[1]," ").concat(c[2],", ").concat(c[3]),l=Object(i.useContext)(j).user,d=Object(i.useState)(!1),u=Object(s.a)(d,2),b=u[0],f=u[1],m=Object(i.useState)(!1),h=Object(s.a)(m,2),O=h[0],p=h[1],g=function(){f(!0)},v=function(){p(!0)};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Te.a,{className:t.root,children:[Object(M.jsxs)(De.a,{children:[Object(M.jsxs)("span",{className:t.rating,children:[a.rating,Object(M.jsx)("img",{src:Be,alt:"bean",style:{height:"15px",width:"15px",marginLeft:"0.1em"}})]}),Object(M.jsx)("div",{className:t.description,children:a.description}),Object(M.jsxs)("div",{className:t.userInfo,children:[Object(M.jsx)("img",{src:n.avatar_url,alt:n.first_name,className:t.image}),Object(M.jsxs)("div",{children:[n.first_name," ",n.last_name]})]}),Object(M.jsx)(x.a,{variant:"body2",color:"textSecondary",children:o})]}),Object(M.jsx)(Ht.a,{children:l&&l.id===a.user_id?Object(M.jsxs)("div",{children:[Object(M.jsx)(D.a,{className:t.button,variant:"outlined",color:"primary",size:"small",onClick:v,children:"Edit"}),Object(M.jsx)(D.a,{variant:"outlined",color:"primary",size:"small",onClick:g,children:"Delete"})]}):""})]}),Object(M.jsx)(It,{id:a.id,open:b,handleClose:function(){f(!1)},handleClickOpen:g}),Object(M.jsx)(Wt,{coffee:r,review:a,openReviewForm:O,setOpenReviewForm:p,handleCloseReviewForm:function(){p(!1)},handleClickOpenReviewForm:v})]})}var Ut=function(e){var t=e.coffee,a=Object(i.useContext)(ae).state,n=a.reviews,r=a.users,c=Ye(Object.values(n),t.id).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),s=c.map((function(e){return Object(M.jsx)(qt,{review:e,reviewUser:r[e.user_id],coffee:t},e.id)}));return Object(M.jsxs)("div",{className:Nt.a["coffee-review-list"],children:[s,!c.length&&Object(M.jsx)("p",{className:Nt.a["no-reviews"],A:!0,children:"Be the first one to leave a review!"})]})},Yt=Object(b.a)((function(e){return{root:Object(d.a)({height:200,padding:"2em",flex:1,display:"flex",justifyContent:"center",alignItems:"center",border:"0px solid",borderRadius:"1rem",backgroundColor:e.palette.background.secondary,"&:hover":{transform:"scale3d(1.05, 1.05, 1)",background:"#e0d4a7"}},e.breakpoints.down("sm"),{margin:"0 0 1em 0"})}}));function Gt(e){var t=e.coffee,a=e.openReviewForm,n=e.setOpenReviewForm,r=Object(i.useState)(0),c=Object(s.a)(r,2),o=c[0],l=c[1],d=Object(i.useState)(""),u=Object(s.a)(d,2),b=u[0],f=u[1],m=Object(i.useContext)(Dt).addReview,h=Object(i.useContext)(j),O=h.user,p=h.setOpenLogin,x=function(){O?a?l((function(e){return o})):n(!0):p((function(e){return!0}))},g=function(){n(!1),l(0)},v=Yt();return Object(M.jsx)(Te.a,{className:v.root,children:Object(M.jsxs)(De.a,{children:[Object(M.jsx)("h3",{children:"How did you like this Coffee?"}),Object(M.jsx)(Lt,{rating:o,setRating:l,handleStarClick:x}),Object(M.jsx)(At,{coffee:t,rating:o,setRating:l,openReviewForm:a,setOpenReviewForm:n,description:b,setDescription:f,handleClickOpenReviewForm:x,handleCloseReviewForm:g,handleSubmitReviewForm:function(){m({rating:o,description:b,user_id:O.id,coffee_id:t.id}).then((function(){g()}))},handStarClick:l})]})})}function Kt(e){var t=Object(o.g)(),a=Number(t.id),n=e.addFavourite,r=e.deleteFavourite,c=Object(i.useContext)(ae).state,l=c.coffees,d=c.reviews,u=c.favourites,b=l[a],f=Object(i.useState)(Ye(Object.values(d),a)),m=Object(s.a)(f,2),h=m[0],O=m[1],p=function(e,t){var a,i=[],n=Object(Ue.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;r&&Number(r.coffee_id)===Number(t)&&i.push(r)}}catch(c){n.e(c)}finally{n.f()}return i}(Object.values(u),a);Object(i.useEffect)((function(){O((function(e){return Ye(Object.values(d),a)}))}),[d,a]);var x=Object(i.useContext)(j).user,g=x?x.id:null,v=Object(i.useState)(!1),y=Object(s.a)(v,2),w=y[0],C=y[1];Object(i.useEffect)((function(){C((function(e){return function(e,t){if(!t)return!1;var a,i=Object(Ue.a)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(Number(n.user_id)===Number(t))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}(h,g)}))}),[h,g]);var _=Object(i.useState)(!1),S=Object(s.a)(_,2),N=S[0],k=S[1],R=Object(i.useState)(null),F=Object(s.a)(R,2),T=F[0],E=F[1];return Object(M.jsx)("div",{children:b&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(kt,{coffee:b,reviews:h,favourites:p,addFavourite:n,deleteFavourite:r,isLiked:Ke}),Object(M.jsxs)("div",{className:Nt.a["coffee-cafe-section"],children:[Object(M.jsx)("h1",{className:Nt.a["coffee-review-heading"],children:"Featured Cafe for this Coffee"}),Object(M.jsx)(Et,{cafeData:T,setCafeData:E,coffee:b})]}),Object(M.jsxs)("div",{className:Nt.a["coffee-review-wrapper"],children:[Object(M.jsx)("h1",{className:Nt.a["coffee-review-heading"],children:"Community Reviews"}),Object(M.jsxs)("div",{className:Nt.a["coffee-review-section"],children:[Object(M.jsx)(Ut,{coffeeId:a,coffee:b,openReviewForm:N,setOpenReviewForm:k}),!w&&Object(M.jsx)(Gt,{coffee:b,openReviewForm:N,setOpenReviewForm:k})]})]})]})})}var Vt=a(321),Zt=a(322),Jt=a(330),Xt=a(28),$t=a(329),Qt=Object(b.a)((function(e){return{root:{marginRight:0,padding:".25em 2em",width:250,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}}));function ea(e){var t=Qt(),a=e.name;return Object(M.jsx)(fe.a,{className:t.root,value:a,control:Object(M.jsx)($t.a,{color:"primary"}),label:a})}var ta=a(336),aa=a(298),ia=a(299),na=Object(b.a)((function(e){return{root:{marginTop:"0.5em",width:250},nested:{paddingLeft:e.spacing(4)},subheader:{fontSize:"1.25rem",position:"static"}}}));function ra(e){var t=e.sortOptions,a=e.handleSort,n=na(),r=Object(i.useState)("Recommended"),c=Object(s.a)(r,2),o=c[0],l=c[1],d=Object.keys(t).map((function(e){return Object(M.jsx)(ea,{name:t[e]},e)}));return Object(M.jsx)(ia.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(M.jsx)(aa.a,{component:"div",id:"nested-list-subheader",className:n.subheader,children:"Sort By"}),className:n.root,children:Object(M.jsx)(Ne.a,{component:"fieldset",children:Object(M.jsx)(ta.a,{className:n.radio,"aria-label":"sorting",name:"sorting1",value:o,onChange:function(e,t){a(t),l(e.target.value)},children:d})})})}var ca=a(249),sa=a(319);function oa(e){var t=e.item,a=e.filters,n=e.setFilters,r=e.handleFilters,c=e.category,o=Object(i.useState)(!1),l=Object(s.a)(o,2),j=l[0],u=l[1];return Object(M.jsxs)(ca.a,{button:!0,children:[Object(M.jsx)(me.a,{checked:j,onChange:function(e){!function(e,t){var i=a[c].indexOf(t),s=Object(Ot.a)(a[c]);-1===i?s.push(t):s.splice(i,1);var o=Object(Q.a)(Object(Q.a)({},a),{},Object(d.a)({},c,s));n((function(e){return o})),u(e.target.checked),r(o)}(e,t.id)},color:"primary",inputProps:{"aria-label":"primary checkbox"}}),Object(M.jsx)(sa.a,{primary:t.type})]})}var la=Object(b.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)},maxHeight:"10rem",overflow:"auto"},textField:{"& .MuiChip-root":{backgroundColor:e.palette.primary.main,color:"white"},"& .MuiSvgIcon-root":{color:"white"}}}}));function da(e){var t=la(),a=e.filters,i=e.setFilters,n=e.handleFilters,r=e.regions;return Object(M.jsx)("div",{className:t.root,children:Object(M.jsx)(te.a,{multiple:!0,id:"tags-outlined",options:r,getOptionLabel:function(e){return e.type},getOptionSelected:function(e,t){return e.type===t.type},defaultValue:[],filterSelectedOptions:!0,onChange:function(e,t){return function(e,t){var r,c=[],s=Object(Ue.a)(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;c.push(o.id)}}catch(j){s.e(j)}finally{s.f()}var l=Object(Q.a)(Object(Q.a)({},a),{},Object(d.a)({},"region",c));i((function(e){return l})),n(l)}(0,t)},renderInput:function(e){return Object(M.jsx)(be.a,Object(Q.a)(Object(Q.a)({},e),{},{variant:"outlined",placeholder:"Regions",className:t.textField}))}})})}var ja=a(320),ua=a(170),ba=a.n(ua),fa=a(171),ma=a.n(fa);function ha(e){var t=e.classes,a=e.name,i=e.items,r=e.filters,c=e.setFilters,o=e.handleFilters,l=e.category,d=n.a.useState(!0),j=Object(s.a)(d,2),u=j[0],b=j[1],f=i.map((function(e,a){return Object(M.jsx)(oa,{classes:t,item:e,category:l,filters:r,setFilters:c,handleFilters:o},e.id)}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(ca.a,{button:!0,onClick:function(){b(!u)},children:[Object(M.jsx)(sa.a,{primary:a}),u?Object(M.jsx)(ba.a,{}):Object(M.jsx)(ma.a,{})]}),Object(M.jsx)(ja.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(M.jsxs)(ia.a,{component:"div",disablePadding:!0,children:["Region"!==a&&f,"Region"===a&&Object(M.jsx)(ca.a,{button:!0,children:Object(M.jsx)(da,{regions:Object.values(i),filters:r,setFilters:c,handleFilters:o})})]})})]})}var Oa=Object(b.a)((function(e){return{root:{width:250,height:"100%"},nested:{paddingLeft:e.spacing(4)},subheader:{fontSize:"1.25rem"}}}));function pa(e){var t=Oa(),a=e.categories,i=e.filters,n=e.setFilters,r=e.handleFilters,c=Object.keys(a).map((function(e,c){return Object(M.jsx)(ha,{name:a[e].name,category:e,classes:t,items:Object.values(a[e].items),filters:i,setFilters:n,handleFilters:r},c)}));return Object(M.jsx)(ia.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(M.jsx)(aa.a,{className:t.subheader,component:"div",id:"nested-list-subheader",children:"Filter By"}),className:t.root,children:c})}var xa=a(112),ga=a.n(xa),va=Object(b.a)((function(e){return{root:{display:"flex"},drawer:Object(d.a)({},e.breakpoints.up("sm"),{width:250,flexShrink:0}),appBar:Object(d.a)({position:"fixed",left:0,height:"2%",width:"1%",transform:"translate(0px, 30vh)",display:"flex",margin:"1rem 0"},e.breakpoints.up("sm"),{marginLeft:250}),menuButton:Object(d.a)({fontSize:"1rem",margin:"0 auto",color:e.palette.text.secondary},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:250},content:{flexGrow:1,padding:e.spacing(3)}}}));var ya=function(e){var t=e.window,a=e.sortOptions,i=e.handleSort,r=e.categories,c=e.filters,o=e.setFilters,l=e.handleFilters,d=va(),j=Object(Xt.a)(),u=n.a.useState(!1),b=Object(s.a)(u,2),f=b[0],m=b[1],h=function(){m(!f)},O=Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{className:d.toolbar}),Object(M.jsx)(Vt.a,{}),Object(M.jsx)(ra,{sortOptions:a,handleSort:i}),Object(M.jsx)(Vt.a,{}),Object(M.jsx)(pa,{categories:r,filters:c,setFilters:o,handleFilters:l})]}),x=void 0!==t?function(){return t().document.body}:void 0;return Object(M.jsxs)("div",{className:d.root,children:[Object(M.jsx)(ue.a,{}),Object(M.jsx)("div",{className:d.appBar,children:Object(M.jsx)(p.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:h,className:d.menuButton,children:Object(M.jsx)(ga.a,{})})}),Object(M.jsxs)("nav",{className:d.drawer,"aria-label":"mailbox folders",children:[Object(M.jsx)(Jt.a,{smUp:!0,implementation:"css",children:Object(M.jsx)(Zt.a,{container:x,variant:"temporary",anchor:"rtl"===j.direction?"right":"left",open:f,onClose:h,classes:{paper:d.drawerPaper},ModalProps:{keepMounted:!0},children:O})}),Object(M.jsx)(Jt.a,{xsDown:!0,implementation:"css",children:Object(M.jsx)(Zt.a,{classes:{paper:d.drawerPaper},variant:"permanent",open:!0,children:O})})]})]})},wa=a.p+"static/media/CaffaInverted.19fcdcdd.png",Ca=a(172),_a=a.n(Ca),Sa=a(173),Na=a.n(Sa),ka=a(174),Ra=a.n(ka),Fa=Object(b.a)((function(e){return{footer:{marginTop:"50px",marginBottom:"0px",paddingTop:"30px",paddingBottom:"30px",backgroundColor:"#252B2C",color:e.palette.text.light},footerContainer:Object(d.a)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:e.palette.text.light},e.breakpoints.up("lg"),{display:"flex",flexDirection:"column",alignItems:"flex-start",alignContent:"center"})}}));function Ta(){var e=Fa();return Object(M.jsxs)(l.a,{container:!0,direction:"row",justify:"center",className:e.footer,children:[Object(M.jsxs)(l.a,{container:!0,xs:12,sm:3,className:e.footerContainer,children:[Object(M.jsx)("img",{src:wa,width:"50",height:"50",alt:"caffa"}),Object(M.jsx)(x.a,{variant:"caption",color:"inherit",children:"\xa9 2021"})]}),Object(M.jsxs)(l.a,{container:!0,xs:12,sm:3,className:e.footerContainer,children:[Object(M.jsx)(x.a,{variant:"body1",color:"inherit",children:"Company"}),Object(M.jsx)(x.a,{variant:"caption",color:"inherit",children:"About us"})]}),Object(M.jsxs)(l.a,{container:!0,xs:12,sm:3,className:e.footerContainer,children:[Object(M.jsx)(x.a,{variant:"body1",color:"inherit",children:"Further Information"}),Object(M.jsx)(x.a,{variant:"caption",color:"inherit",children:"Terms and conditions"}),Object(M.jsx)(x.a,{variant:"caption",color:"inherit",children:"Private policy"})]}),Object(M.jsxs)(l.a,{container:!0,xs:12,sm:3,className:e.footerContainer,children:[Object(M.jsx)(x.a,{variant:"body1",color:"inherit",children:"Follow us"}),Object(M.jsxs)(l.a,{children:[Object(M.jsx)(_a.a,{}),Object(M.jsx)(Na.a,{}),Object(M.jsx)(Ra.a,{})]})]})]})}var Ea=a(128),Da=a.n(Ea);var Ia=function(e){var t=Object(i.useContext)(ae).state,a=Object.values(t.regions),n=Object.values(t.coffees),r={grain_species:{name:"Grain Species",items:{1:{id:1,type:"Arabica"},2:{id:2,type:"Robusta"}}},acidity:{name:"Acidity",items:{3:{id:3,type:"Low"},4:{id:4,type:"Low-Medium"},5:{id:5,type:"Medium"},6:{id:6,type:"Medium-High"},7:{id:7,type:"High"}}},roast:{name:"Roast",items:{8:{id:8,type:"Light"},9:{id:9,type:"Medium"},10:{id:10,type:"Dark"}}},region:{name:"Region",items:Je(a,11)}},c=Object(i.useState)({region:[],grain_species:[],acidity:[],roast:[]}),l=Object(s.a)(c,2),d=l[0],j=l[1],u=Object(i.useState)(n),b=Object(s.a)(u,2),f=b[0],m=b[1],h=Object(i.useState)(Ze(d)),O=Object(s.a)(h,2),p=O[0],x=O[1];return Object(i.useEffect)((function(){var e=Ze(d);e||m((function(e){return Object.values(t.coffees)})),x((function(t){return e}))}),[p,t.coffees,d]),Object(M.jsx)("div",{children:Object(M.jsxs)(o.c,{children:[Object(M.jsxs)(o.a,{path:"/coffees/:id",children:[Object(M.jsx)(Kt,{}),Object(M.jsx)(Ta,{})]}),Object(M.jsx)(o.a,{path:"/coffees",children:Object(M.jsxs)("div",{className:Da.a["coffees-page"],children:[Object(M.jsx)(ya,{sortOptions:{1:"Recommended",2:"Name: A - Z",3:"Name: Z - A",4:"Rating: Low to High",5:"Rating: High to Low"},handleSort:function(e){if(e&&f.length){var t=f.sort((function(t,a){return"Recommended"===e?t.id-a.id:"Name: A - Z"===e?t.name.toLowerCase()<a.name.toLowerCase()?-1:t.name.toLowerCase()>a.name.toLowerCase()?1:0:"Name: Z - A"===e?t.name.toLowerCase()<a.name.toLowerCase()?1:t.name.toLowerCase()>a.name.toLowerCase()?-1:0:"Rating: Low to High"===e?t.avg_rating-a.avg_rating:"Rating: High to Low"===e?a.avg_rating-t.avg_rating:t.id-a.id}));m((function(e){return Object(Ot.a)(t)}))}},categories:r,filters:d,setFilters:j,handleFilters:function(e){var t=Object(Q.a)({},e),a=Ve(n,r,t);m((function(e){return a}));var i=Ze(e);i||m((function(e){return n})),x((function(e){return i}))}}),Object(M.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",minHeight:"90vh"},children:[!f.length&&Object(M.jsx)("p",{className:Da.a["no-results"],children:"There doesn't seem to be any results, try our image search instead!"}),Object(M.jsx)(We,{coffees:f}),Object(M.jsx)(Ta,{})]})]})})]})})},Ba=a(175),Pa=a(323),La=a(178),za=a.n(La),Aa=a(179),Wa=a.n(Aa),Ha=Object(b.a)((function(e){return{root:{display:"flex"},drawer:Object(d.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(d.a)({position:"fixed",left:0,height:"2%",width:"1%",transform:"translate(0px, 30vh)",display:"flex",margin:"1rem 0"},e.breakpoints.up("sm"),{marginLeft:240}),menuButton:Object(d.a)({fontSize:"1rem",margin:"0 auto",color:e.palette.text.secondary},e.breakpoints.up("sm"),{display:"none"}),listItem:{display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5rem"},icon:{marginRight:"0.5rem"},toolbar:e.mixins.toolbar,drawerPaper:{width:240,boxSizing:"border-box",padding:"1.5rem"},content:{flexGrow:1,padding:e.spacing(3)}}}));var Ma=function(e){var t=e.window,a=Ha(),i=Object(Xt.a)(),r=n.a.useState(!1),c=Object(s.a)(r,2),o=c[0],l=c[1],d=function(){l(!o)},j=Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{className:a.toolbar}),Object(M.jsxs)(ia.a,{children:[Object(M.jsx)(u.b,{to:"/account",children:Object(M.jsxs)(Pa.a,{className:a.listItem,children:[Object(M.jsx)(_.a,{className:a.icon}),Object(M.jsx)(sa.a,{primary:"My Account"})]})}),Object(M.jsx)(u.b,{to:"/account/favourites",children:Object(M.jsxs)(Pa.a,{className:a.listItem,children:[Object(M.jsx)(Ct.a,{className:a.icon}),Object(M.jsx)(sa.a,{primary:"My Favourites"})]})}),Object(M.jsx)(u.b,{to:"/account/reviews",children:Object(M.jsxs)(Pa.a,{className:a.listItem,children:[Object(M.jsx)(za.a,{className:a.icon}),Object(M.jsx)(sa.a,{primary:"My Reviews"})]})}),Object(M.jsx)(u.b,{to:"/account/settings",children:Object(M.jsxs)(Pa.a,{className:a.listItem,children:[Object(M.jsx)(Wa.a,{className:a.icon}),Object(M.jsx)(sa.a,{primary:"My Settings"})]})})]})]}),b=void 0!==t?function(){return t().document.body}:void 0;return Object(M.jsxs)("div",{className:a.root,children:[Object(M.jsx)(ue.a,{}),Object(M.jsx)("div",{className:a.appBar,children:Object(M.jsx)(p.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:a.menuButton,children:Object(M.jsx)(ga.a,{})})}),Object(M.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(M.jsx)(Jt.a,{smUp:!0,implementation:"css",children:Object(M.jsx)(Zt.a,{container:b,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:o,onClose:d,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:j})}),Object(M.jsx)(Jt.a,{xsDown:!0,implementation:"css",children:Object(M.jsx)(Zt.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:j})})]})]})},qa=a(324),Ua=a(326),Ya=function(e){var t=e.editUserHandler,a=e.classes,n=Object(i.useContext)(j).user,r=Object(i.useState)({first_name:"",last_name:"",email:"",avatar_url:""}),c=Object(s.a)(r,2),o=c[0],u=c[1];Object(i.useEffect)((function(){u((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{first_name:n?n.first_name:"",last_name:n?n.last_name:"",email:n?n.email:"",avatar_url:n?n.avatar_url:""})}))}),[n]);var b=function(e){u(Object(Q.a)(Object(Q.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))},f=function(e){e.preventDefault(),t(o.first_name,o.last_name,o.email)};return Object(M.jsx)("form",Object(Q.a)(Object(Q.a)({autoComplete:"off",noValidate:!0},e),{},{onSubmit:f,children:Object(M.jsxs)(Te.a,{children:[Object(M.jsx)(qa.a,{subheader:"Update your account details here",title:"My Profile"}),Object(M.jsx)(De.a,{children:Object(M.jsx)(Ua.a,{children:Object(M.jsx)("img",{width:"150px",src:o.avatar_url,alt:o.first_name,style:{borderRadius:"50%"}})})}),Object(M.jsx)(Ht.a,{children:Object(M.jsx)(D.a,{color:"primary",fullWidth:!0,variant:"text",children:"Upload picture"})}),Object(M.jsx)(De.a,{children:Object(M.jsxs)(l.a,{container:!0,spacing:3,children:[Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(be.a,{fullWidth:!0,label:"First name",name:"first_name",onChange:b,required:!0,value:o.first_name,variant:"outlined"})}),Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(be.a,{fullWidth:!0,label:"Last name",name:"last_name",onChange:b,required:!0,value:o.last_name,variant:"outlined"})}),Object(M.jsx)(l.a,{item:!0,xs:12,children:Object(M.jsx)(be.a,{fullWidth:!0,label:"Email Address",name:"email",onChange:b,required:!0,value:o.email,variant:"outlined"})})]})}),Object(M.jsx)(Ua.a,{m:2,children:Object(M.jsx)(D.a,{className:a.settingsButton,type:"submit",color:"primary",variant:"outlined",onSubmit:f,children:"Save details"})})]})}))};function Ga(e){var t=Object(i.useContext)(ae).state,a=Object(i.useContext)(j).user,n=e.classes,r=e.limit,c=t.coffees,o=Object(i.useState)({id:"",first_name:"",last_name:"",email:""}),d=Object(s.a)(o,2),u=d[0],b=d[1];Object(i.useEffect)((function(){b((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{id:a?a.id:"",first_name:a?a.first_name:"",last_name:a?a.last_name:"",email:a?a.email:""})}))}),[a]);var f=function(e,t){var a,i=[],n=Object(Ue.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;r&&Number(r.user_id)===Number(t)&&i.push(r)}}catch(c){n.e(c)}finally{n.f()}return i}(Object.values(t.favourites),u.id),m=function(e,t){var a,i=[],n=Object(Ue.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;i.push(t[r.coffee_id])}}catch(c){n.e(c)}finally{n.f()}return i}(Object.values(f).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).slice(0,r),c).map((function(e){return Object(M.jsx)(l.a,{item:!0,xs:12,sm:8,md:6,lg:3,style:{padding:"1.5em 1.5em"},children:Object(M.jsx)(Le,{coffee:e},e.id)})}));return Object(M.jsxs)(l.a,{container:!0,xs:12,style:{marginTop:"2rem"},children:[Object(M.jsxs)(l.a,{container:!0,spacing:10,children:[m,!m.length&&Object(M.jsx)("p",{children:"There are no favourites here!"})]}),r?Object(M.jsx)(l.a,{container:!0,xs:12,style:{justifyContent:"flex-start",marginTop:"4.5em"},children:Object(M.jsx)(D.a,{className:n.seeMoreBtn,href:"/account/favourites",variant:"contained",color:"primary",disableElevation:!0,children:"SEE MORE"})}):null]})}var Ka=function(e){var t=e.coffee,a=e.classes,n=e.limit,r=Object(i.useContext)(j).user,c=Object(i.useContext)(ae).state,o=c.reviews,d=c.users,u=Object(i.useState)({id:"",first_name:"",last_name:"",email:""}),b=Object(s.a)(u,2),f=b[0],m=b[1];Object(i.useEffect)((function(){m((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{id:r?r.id:"",first_name:r?r.first_name:"",last_name:r?r.last_name:"",email:r?r.email:""})}))}),[r]);var h=function(e,t){var a,i=[],n=Object(Ue.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;r&&Number(r.user_id)===Number(t)&&i.push(r)}}catch(c){n.e(c)}finally{n.f()}return i}(Object.values(o),f.id).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})).slice(0,n).map((function(e){return Object(M.jsxs)(l.a,{container:!0,className:a.reviewItemSection,children:[Object(M.jsx)(l.a,{item:!0,sm:12,md:12,lg:2,style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(M.jsx)(he.a,{href:"/coffees/".concat(e.coffee_id),children:Object(M.jsx)("img",{class:a.media,style:{objectFit:"cover"},src:c.coffees[e.coffee_id].image_url,alt:"".concat(t[e.id].name)})})}),Object(M.jsx)(l.a,{item:!0,md:12,lg:10,className:a.reviewCard,children:Object(M.jsx)(qt,{review:e,reviewUser:d[e.user_id],coffee:c.coffees[e.coffee_id]},e.id)})]})}));return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{children:h}),n?Object(M.jsx)(D.a,{className:a.seeMoreBtn,href:"/account/reviews",variant:"contained",color:"primary",disableElevation:!0,children:"SEE MORE"}):null]})},Va=Object(b.a)((function(e){return{root:{flexGrow:2,display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,boxSizing:"border-box",paddingTop:"30px"},drawerContainer:{overflow:"auto"},reviewItemSection:{alignItems:"center",margin:"1rem 1rem 1rem"},reviewCard:{padding:"1rem 0rem",width:"100%"},reviewCardActionArea:{padding:"0rem 3rem"},content:{flexGrow:1,minHeight:"calc(100vh - 70px)"},accountContent:{flexDirection:"column",padding:"70px 50px 50px 50px",minHeight:"90vh"},media:{height:275,width:180,backgroundSize:"contain"},avatarSettings:{height:150,width:150},settingsForm:{flexDirection:"row",justifyContent:"center"},secondTitle:{textAlign:"center",fontVariant:"h3"},titleContainer:{marginTop:"5rem",marginBottom:"3rem"},SubTitle:{margin:"10px"},seeMoreBtn:{marginTop:"2rem",color:"#646264",backgroundColor:"white",border:"2px solid #DEBB63",borderRadius:"1rem","&:hover":{border:"3px solid #DEBB63",backgroundColor:"#DEBB63",color:"white"}},header:{fontSize:"2.5rem"},subtitle:{fontSize:"1.5rem"},paragraph:{fontSize:"1.5rem",margin:"0px 16px 0px 16px"},mainTitle:{fontSize:"3rem"}}}));function Za(e){var t=e.editUserHandler,a=Va(),n="h2",r="h4",c=Object(i.useContext)(ae).state,d=Object(i.useContext)(j).user,u=Object(i.useState)(!1),b=Object(s.a)(u,2),f=b[0],m=b[1],h=Object(i.useState)({id:"",first_name:"",last_name:"",email:""}),O=Object(s.a)(h,2),p=(O[0],O[1]);Object(i.useEffect)((function(){p((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{id:d?d.id:"",first_name:d?d.first_name:"",last_name:d?d.last_name:"",email:d?d.email:""})}))}),[d]);var g=c.coffees;return Object(M.jsxs)("div",{className:a.root,children:[Object(M.jsx)(Ba.a,{children:Object(M.jsx)("title",{children:"Account | Caffa"})}),Object(M.jsx)(Ma,{}),Object(M.jsxs)("main",{className:a.content,children:[Object(M.jsxs)(o.c,{children:[Object(M.jsx)(o.a,{path:"/account/favourites",children:Object(M.jsxs)(l.a,{container:!0,className:a.accountContent,children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Favourites"}),Object(M.jsx)(Ga,{classes:a,titleSize:n})]})}),Object(M.jsx)(o.a,{path:"/account/reviews",children:Object(M.jsxs)(l.a,{container:!0,className:a.accountContent,children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Reviews"}),Object(M.jsx)(Ka,{classes:a,titleSize:n,user:d,coffee:g,openReviewForm:f,setOpenReviewForm:m})]})}),Object(M.jsx)(o.a,{path:"/account/settings",children:Object(M.jsx)(l.a,{container:!0,className:a.accountContent,children:Object(M.jsx)(Ya,{editUserHandler:t,classes:a})})}),Object(M.jsx)(o.a,{path:"/account",children:Object(M.jsxs)(l.a,{container:!0,className:a.accountContent,children:[Object(M.jsx)(x.a,{variant:"h2",className:a.mainTitle,children:"My Caffa"}),Object(M.jsxs)("div",{className:a.titleContainer,children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Recent Favourites"}),Object(M.jsx)(x.a,{variant:"h3",className:a.subtitle,gutterBottom:!0,children:"Your own top picks from Caffa"})]}),Object(M.jsx)(Ga,{user:d,limit:3,classes:a,titleSize:n,subTitleSize:r}),Object(M.jsxs)("div",{className:a.titleContainer,children:[Object(M.jsx)(x.a,{variant:"h2",className:a.header,gutterBottom:!0,children:"Recent Reviews"}),Object(M.jsx)(x.a,{variant:"h3",className:a.subtitle,gutterBottom:!0,children:"You left a review on these coffees"})]}),Object(M.jsx)(Ka,{user:d,coffee:g,openReviewForm:f,setOpenReviewForm:m,limit:3,classes:a,titleSize:n,subTitleSize:r})]})})]}),Object(M.jsx)(Ta,{})]})]})}function Ja(){return Object(M.jsxs)(x.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(M.jsx)(he.a,{color:"inherit",href:"https://material-ui.com/",children:"Caffa"})," ",(new Date).getFullYear(),"."]})}var Xa=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function $a(e){var t=Xa(),a=Object(i.useState)(""),n=Object(s.a)(a,2),r=n[0],c=n[1],d=Object(i.useState)(""),u=Object(s.a)(d,2),b=u[0],f=u[1],m=Object(i.useState)(""),h=Object(s.a)(m,2),O=h[0],p=h[1],g=Object(i.useState)(""),v=Object(s.a)(g,2),y=v[0],w=v[1],C=Object(i.useState)(""),_=Object(s.a)(C,2),S=_[0],N=_[1],k=Object(i.useContext)(j).registerHandler,R=Object(o.f)();return Object(M.jsxs)(xe.a,{component:"main",maxWidth:"xs",style:{minHeight:"85vh"},children:[Object(M.jsx)(ue.a,{}),Object(M.jsxs)("div",{className:t.paper,children:[Object(M.jsx)(je.a,{className:t.avatar,children:Object(M.jsx)(pe.a,{})}),Object(M.jsx)(x.a,{component:"h1",variant:"h5",children:"Register"}),Object(M.jsxs)("form",{className:t.form,onSubmit:function(e){e.preventDefault(),k(r,b,O,S).then((function(e){if("ok"===e)return R.push("/");w("Email already exists")}))},children:[Object(M.jsx)(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"first name",label:"First name",name:"firstName",autoComplete:"first name",autoFocus:!0,value:r,onInput:function(e){return c(e.target.value)}}),Object(M.jsx)(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"last name",label:"Last Name",name:"last name",autoComplete:"last name",autoFocus:!0,value:b,onInput:function(e){return f(e.target.value)}}),Object(M.jsx)(be.a,Object(Q.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:O,onInput:function(e){return p(e.target.value)}},y&&{error:!0,helperText:y})),Object(M.jsx)(be.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:S,onInput:function(e){return N(e.target.value)}}),Object(M.jsx)(D.a,{type:"submit",fullWidth:!0,variant:"outlined",color:"primary",className:t.submit,children:"Sign In"}),Object(M.jsx)(l.a,{container:!0,children:Object(M.jsx)(l.a,{item:!0})})]})]}),Object(M.jsx)(Ua.a,{mt:8,children:Object(M.jsx)(Ja,{})})]})}var Qa=function(e){var t=e.addFavourite,a=e.deleteFavourite,n=e.addReview,r=e.editReview,c=e.deleteReview,d=e.addCoffee,j=e.user,u=e.editUserHandler,b=e.logoutHandler,f=Object(i.useState)({url:"",textArray:[]}),m=Object(s.a)(f,2),h=m[0],O=m[1];return Object(M.jsxs)(l.a,{container:!0,direction:"column",style:{position:"relative",width:"100%"},children:[Object(M.jsx)(X.Provider,{value:{results:h,setResults:O},children:Object(M.jsx)(l.a,{item:!0,children:Object(M.jsx)(de,{logoutHandler:b,user:j})})}),Object(M.jsxs)(o.c,{children:[Object(M.jsx)(o.a,{path:"/account",children:Object(M.jsx)(Dt.Provider,{value:{addReview:n,editReview:r,deleteReview:c},children:Object(M.jsx)(Za,{editUserHandler:u})})}),Object(M.jsx)(o.a,{path:"/coffees",children:Object(M.jsx)(Dt.Provider,{value:{addReview:n,editReview:r,deleteReview:c},children:Object(M.jsx)(pt.Provider,{value:{addFavourite:t,deleteFavourite:a},children:Object(M.jsx)(Ia,{})})})}),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(o.a,{path:"/search",children:Object(M.jsx)(l.a,{item:!0,style:{minHeight:"80vh"},children:Object(M.jsx)(ht,{results:h,setResults:O,addCoffee:d})})}),Object(M.jsx)(o.a,{path:"/login",children:Object(M.jsx)(Fe,{})}),Object(M.jsx)(o.a,{path:"/register",children:Object(M.jsx)($a,{})}),Object(M.jsx)(o.a,{path:"/",exact:!0,children:Object(M.jsx)(ot,{})}),Object(M.jsx)(Ta,{})]})]})]})},ei=a(250),ti=n.a.forwardRef((function(e,t){return Object(M.jsx)(ei.a,Object(Q.a)({direction:"up",ref:t},e))}));function ai(e){var t=Object(i.useContext)(j).openLogin,a=e.handleLoginClose;return Object(M.jsx)("div",{children:Object(M.jsx)(I.a,{open:t,TransitionComponent:ti,keepMounted:!0,onClose:a,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:Object(M.jsx)(P.a,{children:Object(M.jsx)(Fe,{})})})})}a(242);var ii="SET_APPLICATION_DATA",ni="SET_FAVOURITE",ri="SET_REVIEW",ci="SET_COFFEE";function si(e,t){switch(t.type){case ii:return Object(Q.a)(Object(Q.a)({},e),{},{coffees:t.coffees,reviews:t.reviews,favourites:t.favourites,users:t.users,regions:t.regions});case"SET_USER":return Object(Q.a)(Object(Q.a)({},e),{},{users:t.users});case ni:return Object(Q.a)(Object(Q.a)({},e),{},{favourites:t.favourites});case ri:return Object(Q.a)(Object(Q.a)({},e),{},{reviews:t.reviews});case ci:return Object(Q.a)(Object(Q.a)({},e),{},{coffees:Object(Q.a)(Object(Q.a)({},e.coffees),{},Object(d.a)({},t.coffee.id,t.coffee))});default:throw new Error("Tried to reduce with unsupported action type: ".concat(t.type))}}var oi=function(){var e=Object(i.useReducer)(si,{users:{},coffees:{},reviews:{},favourites:{},regions:{}}),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(i.useEffect)((function(){Promise.all([V.a.get("/api/users"),V.a.get("/api/coffees"),V.a.get("/api/reviews"),V.a.get("/api/favourites")]).then((function(e){var t,a={},i=Object(Ue.a)(e[0].data);try{for(i.s();!(t=i.n()).done;){var r=t.value;a[r.id]=r}}catch(x){i.e(x)}finally{i.f()}var c,s={},o=Object(Ue.a)(e[1].data);try{for(o.s();!(c=o.n()).done;){var l=c.value;s[l.id]=l}}catch(x){o.e(x)}finally{o.f()}var d,j={},u=Object(Ue.a)(e[2].data);try{for(u.s();!(d=u.n()).done;){var b=d.value;j[b.id]=b}}catch(x){u.e(x)}finally{u.f()}var f,m={},h=Object(Ue.a)(e[3].data);try{for(h.s();!(f=h.n()).done;){var O=f.value;m[O.id]=O}}catch(x){h.e(x)}finally{h.f()}var p=function(e){var t,a={},i=Object(Ue.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;a[n.region]=n.region}}catch(x){i.e(x)}finally{i.f()}return Object.values(a)}(Object.values(s));n({type:ii,users:a,coffees:s,reviews:j,favourites:m,regions:p})}))}),[]),{state:a,addFavourite:function(e,t){var i={coffee_id:e,user_id:t};return V.a.post("/api/favourites",i).then((function(e){var t=Object(Q.a)({},e.data),i=Object(Q.a)(Object(Q.a)({},a.favourites),{},Object(d.a)({},e.data.id,t));return n({type:ni,favourites:i}),e.data.id}))},deleteFavourite:function(e){var t=Object(Q.a)(Object(Q.a)({},a.favourites),{},Object(d.a)({},e,null));return V.a.delete("/api/favourites/".concat(e)).then((function(e){n({type:ni,favourites:t})}))},addReview:function(e){var t=e.coffee_id,i=e.user_id,r=e.description,c=e.rating,s={coffee_id:t,user_id:i,description:r,rating:c};return V.a.post("/api/reviews",s).then((function(e){var i=Object(Q.a)({},e.data),r=Object(Q.a)(Object(Q.a)({},a.reviews),{},Object(d.a)({},e.data.id,i)),c=Ge(Ye(Object.values(r),t)),s=Object(Q.a)(Object(Q.a)({},a.coffees[t]),{},{avg_rating:c});return n({type:ci,coffee:s}),n({type:ri,reviews:r}),e.data.id}))},editReview:function(e){var t=e.description,i=e.rating,r=e.id,c={id:r,description:t,rating:i};return V.a.patch("/api/reviews/".concat(r),c).then((function(e){var t=Object(Q.a)({},e.data),i=Object(Q.a)(Object(Q.a)({},a.reviews),{},Object(d.a)({},r,t)),c=Ge(Ye(Object.values(i),e.data.coffee_id)),s=Object(Q.a)(Object(Q.a)({},a.coffees[e.data.coffee_id]),{},{avg_rating:c});n({type:ci,coffee:s}),n({type:ri,reviews:i})}))},deleteReview:function(e){var t=a.reviews[e].coffee_id,i=Object(Q.a)(Object(Q.a)({},a.reviews),{},Object(d.a)({},e,null)),r=Ge(Ye(Object.values(i),t)),c=Object(Q.a)(Object(Q.a)({},a.coffees[t]),{},{avg_rating:r});return V.a.delete("/api/reviews/".concat(e)).then((function(e){n({type:ci,coffee:c}),n({type:ri,reviews:i})}))},addCoffee:function(e){return V.a.post("/api/coffees",e).then((function(e){var t=Object(Q.a)({},e.data);return n({type:ci,coffee:t}),e.data.id}))}}};var li=function(){var e=Object(i.useState)(null),t=Object(s.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(!1),c=Object(s.a)(r,2),o=c[0],l=c[1];Object(i.useEffect)((function(){V.a.post("/api/users/authenticate").then((function(e){return n(e.data)})).catch((function(e){console.log("there was an error authenticating")}))}),[]);var d=function(e,t){return V.a.post("/api/users/login",{email:e,password:t}).then((function(e){n(e.data)})).catch((function(e){console.error(e.message)}))},b=function(e,t,a){return V.a.post("/api/users/edit",{first_name:e,last_name:t,email:a}).catch((function(e){console.error(e.message)}))},f=oi(),m=f.state,h=f.addFavourite,O=f.deleteFavourite,p=f.addReview,x=f.editReview,g=f.deleteReview,v=f.addCoffee;return Object(M.jsx)(u.a,{children:Object(M.jsx)("div",{className:"App",children:Object(M.jsxs)(j.Provider,{value:{user:a,loginHandler:d,openLogin:o,setOpenLogin:l,registerHandler:function(e,t,a,i){return V.a.post("/api/users/register",{first_name:e,last_name:t,email:a,password:i}).then((function(e){return n(e.data),"ok"})).catch((function(e){return"bad"}))},editUserHandler:b},children:[Object(M.jsx)(ai,{handleLoginClose:function(){l(!1)}}),Object(M.jsx)(ae.Provider,{value:{state:m},children:Object(M.jsx)(Qa,{addFavourite:h,deleteFavourite:O,addReview:p,editReview:x,deleteReview:g,addCoffee:v,loginHandler:d,logoutHandler:function(){V.a.post("/api/users/logout").then((function(e){return n(e.data)}))},editUserHandler:b,user:a,setUser:n})})]})})})},di=(a(243),a(180)),ji=a(337),ui=a(325),bi=a(76),fi=a(115);bi.b.add(fi.c,fi.a,fi.b);var mi=Object(di.a)({palette:{type:"light",primary:{main:"#DEBB63"},secondary:{main:"#646264"},text:{primary:"#252b2d",secondary:"rgba(61,58,58,0.54)",light:"rgb(250, 244, 234)"},background:{default:"#ffffff",secondary:"rgb(249,246,235)"}},typography:{fontFamily:"Roboto",h1:{fontFamily:"Playfair Display"},h2:{fontFamily:"Playfair Display"},h3:{fontFamily:"Roboto"},h4:{fontFamily:"Roboto",color:"#646264"},h5:{fontFamily:"Roboto"},h6:{fontFamily:"Roboto"}},props:{MuiButtonBase:{disableRipple:!0}},overrides:{MuiOutlinedInput:{root:{"& $notchedOutline":{borderColor:"#d3d3d3",borderWidth:.5}}},MuiButton:{outlinedPrimary:{color:"#646264",border:"2px solid #DEBB63",borderRadius:"1rem","&:hover":{border:"3px solid #DEBB63",backgroundColor:"#DEBB63",color:"white","@media (hover: none)":{color:"black","&:active":{backgroundColor:"#DEBB63"}}}}}}});mi=Object(ji.a)(mi),c.a.render(Object(M.jsx)(n.a.StrictMode,{children:Object(M.jsx)(ui.a,{theme:mi,children:Object(M.jsx)(li,{})})}),document.getElementById("root"))},54:function(e,t,a){e.exports={"editor-coffee-card":"editorPick_editor-coffee-card__1NdiZ",imgover:"editorPick_imgover__2ISWW","img-gradient":"editorPick_img-gradient__yrZS4","editor-coffee-image":"editorPick_editor-coffee-image__27-vN","editor-details-section":"editorPick_editor-details-section__1V6KX","coffee-details-brand":"editorPick_coffee-details-brand__DtZLF","coffee-details-name":"editorPick_coffee-details-name__3fNpl","coffee-details-paragraph":"editorPick_coffee-details-paragraph___Co_s","coffee-details-chosen":"editorPick_coffee-details-chosen__3fNgj","coffee-details-person":"editorPick_coffee-details-person__1fvvn","editor-pic-container":"editorPick_editor-pic-container__3pVDP","editor-pic":"editorPick_editor-pic__1BAms"}}},[[244,1,2]]]);
//# sourceMappingURL=main.5555e1c6.chunk.js.map