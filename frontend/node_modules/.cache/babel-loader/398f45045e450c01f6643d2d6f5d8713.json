{"ast":null,"code":"var _jsxFileName = \"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/components/image-search/SearchList.js\",\n    _s = $RefreshSig$();\n\nimport { React, useContext, useEffect, useState } from \"react\";\nimport Fuse from \"fuse.js\";\nimport { getReviewsForCoffee, avgRatingForCoffee } from \"../../helpers/selectors\";\nimport CoffeeListItem from \"../coffees/CoffeeListItem\";\nimport { stripSearchTerms } from \"./helpers.js\";\nimport DataContext from \"../../contexts/DataContext\";\nimport AddCoffeeButton from \"../add-coffee/AddCoffeeButton\";\nimport { Grid } from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  header: {\n    padding: \"1em\",\n    paddingLeft: \"15px\",\n    fontSize: \"2.5em\"\n  }\n});\nexport default function SearchList(props) {\n  _s();\n\n  const {\n    state\n  } = useContext(DataContext);\n  const coffees = Object.values(state.coffees);\n  const reviews = state.reviews;\n  const {\n    addCoffee,\n    results\n  } = props;\n  const [storedUrl, setStoredURL] = useState(\"\");\n  const [storedArray, setStoredArray] = useState([]);\n  const classes = useStyles();\n  useEffect(() => {\n    setStoredURL(localStorage.getItem(\"url\") || \"\");\n    setStoredArray(localStorage.getItem(\"textarray\") || []);\n  }, [results.url]);\n  const options = {\n    isCaseSensitive: false,\n    includeScore: true,\n    shouldSort: true,\n    includeMatches: false,\n    findAllMatches: false,\n    minMatchCharLength: 1,\n    location: 0,\n    threshold: 0.7,\n    distance: 100,\n    useExtendedSearch: false,\n    ignoreLocation: false,\n    ignoreFieldNorm: false,\n    keys: [\"name\", \"brand\"]\n  };\n  const fuse = new Fuse(coffees, options);\n\n  const searchResult = () => {\n    let searchTerm = \"\";\n\n    if (storedArray) {\n      searchTerm = storedArray.toString();\n    }\n\n    if (searchTerm !== \"error\") {\n      const string = stripSearchTerms(searchTerm);\n      const Results = fuse.search(string, {\n        limit: 5\n      });\n\n      if (Results.length !== 0) {\n        return Results.map(coffee => {\n          const coffeeReviews = getReviewsForCoffee(Object.values(reviews), coffee.item.id);\n          const avgRating = avgRatingForCoffee(coffeeReviews);\n          return /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 4,\n            lg: 3,\n            children: /*#__PURE__*/_jsxDEV(CoffeeListItem, {\n              coffee: coffee.item,\n              avgRating: avgRating\n            }, coffee.item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this);\n        });\n      }\n\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            style: {\n              fontSize: \"2em\",\n              padding: \"0.5em\"\n            },\n            children: \"There were no matches!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        style: {\n          fontSize: \"2em\"\n        },\n        children: \"There was an error in image search. Your image may not have been detected as a coffee bean bag.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    direction: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      sm: 10,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h2\",\n        className: classes.header,\n        children: \"Your search results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: \"5\",\n        children: searchResult()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), storedUrl && /*#__PURE__*/_jsxDEV(AddCoffeeButton, {\n        url: storedUrl,\n        addCoffee: addCoffee\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: false,\n      sm: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchList, \"500Kn66XWfmgTFwiUFe0zIgYQ4E=\", false, function () {\n  return [useStyles];\n});\n\n_c = SearchList;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchList\");","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/components/image-search/SearchList.js"],"names":["React","useContext","useEffect","useState","Fuse","getReviewsForCoffee","avgRatingForCoffee","CoffeeListItem","stripSearchTerms","DataContext","AddCoffeeButton","Grid","Typography","makeStyles","useStyles","header","padding","paddingLeft","fontSize","SearchList","props","state","coffees","Object","values","reviews","addCoffee","results","storedUrl","setStoredURL","storedArray","setStoredArray","classes","localStorage","getItem","url","options","isCaseSensitive","includeScore","shouldSort","includeMatches","findAllMatches","minMatchCharLength","location","threshold","distance","useExtendedSearch","ignoreLocation","ignoreFieldNorm","keys","fuse","searchResult","searchTerm","toString","string","Results","search","limit","length","map","coffee","coffeeReviews","item","id","avgRating"],"mappings":"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","sourcesContent":["import { React, useContext, useEffect, useState } from \"react\";\nimport Fuse from \"fuse.js\";\nimport {\n  getReviewsForCoffee,\n  avgRatingForCoffee,\n} from \"../../helpers/selectors\";\nimport CoffeeListItem from \"../coffees/CoffeeListItem\";\nimport { stripSearchTerms } from \"./helpers.js\";\nimport DataContext from \"../../contexts/DataContext\";\nimport AddCoffeeButton from \"../add-coffee/AddCoffeeButton\";\nimport { Grid } from \"@material-ui/core\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  header: {\n    padding: \"1em\",\n    paddingLeft: \"15px\",\n    fontSize: \"2.5em\",\n  },\n});\n\nexport default function SearchList(props) {\n  const { state } = useContext(DataContext);\n  const coffees = Object.values(state.coffees);\n  const reviews = state.reviews;\n  const { addCoffee, results } = props;\n  const [storedUrl, setStoredURL] = useState(\"\");\n  const [storedArray, setStoredArray] = useState([]);\n  const classes = useStyles();\n\n  useEffect(() => {\n    setStoredURL(localStorage.getItem(\"url\") || \"\");\n    setStoredArray(localStorage.getItem(\"textarray\") || []);\n  }, [results.url]);\n\n  const options = {\n    isCaseSensitive: false,\n    includeScore: true,\n    shouldSort: true,\n    includeMatches: false,\n    findAllMatches: false,\n    minMatchCharLength: 1,\n    location: 0,\n    threshold: 0.7,\n    distance: 100,\n    useExtendedSearch: false,\n    ignoreLocation: false,\n    ignoreFieldNorm: false,\n    keys: [\"name\", \"brand\"],\n  };\n\n  const fuse = new Fuse(coffees, options);\n\n  const searchResult = () => {\n    let searchTerm = \"\";\n    if (storedArray) {\n      searchTerm = storedArray.toString();\n    }\n\n    if (searchTerm !== \"error\") {\n      const string = stripSearchTerms(searchTerm);\n\n      const Results = fuse.search(string, { limit: 5 });\n\n      if (Results.length !== 0) {\n        return Results.map((coffee) => {\n          const coffeeReviews = getReviewsForCoffee(\n            Object.values(reviews),\n            coffee.item.id\n          );\n          const avgRating = avgRatingForCoffee(coffeeReviews);\n          return (\n            <Grid item xs={12} sm={4} lg={3}>\n              <CoffeeListItem\n                key={coffee.item.id}\n                coffee={coffee.item}\n                avgRating={avgRating}\n              />\n            </Grid>\n          );\n        });\n      }\n      return (\n        <>\n          <Grid item xs={12}>\n            <Typography\n              variant=\"body2\"\n              style={{ fontSize: \"2em\", padding: \"0.5em\" }}\n            >\n              There were no matches!\n            </Typography>\n          </Grid>\n        </>\n      );\n    }\n    return (\n      <Grid item xs={12}>\n        <Typography variant=\"body2\" style={{ fontSize: \"2em\" }}>\n          There was an error in image search. Your image may not have been\n          detected as a coffee bean bag.\n        </Typography>\n      </Grid>\n    );\n  };\n\n  return (\n    <Grid container direction=\"row\">\n      <Grid item xs={false} sm={1} />\n      <Grid item xs={12} sm={10}>\n        <Typography variant=\"h2\" className={classes.header}>\n          Your search results\n        </Typography>\n        <Grid container spacing=\"5\">\n          {searchResult()}\n        </Grid>\n        <br></br>\n        {storedUrl && <AddCoffeeButton url={storedUrl} addCoffee={addCoffee} />}\n      </Grid>\n      <Grid item xs={false} sm={1} />\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}