{"ast":null,"code":"import _objectSpread from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useContext,useEffect}from\"react\";import UserContext from\"../../contexts/UserContext\";import ReviewListItem from\"../coffee-id/ReviewListItem\";import DataContext from\"../../contexts/DataContext\";import{getUserReviews}from\"../../helpers/selectors\";import{Grid,Link,Button}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AccountReviews(props){var coffee=props.coffee,classes=props.classes,limit=props.limit;var _useContext=useContext(UserContext),user=_useContext.user;var _useContext2=useContext(DataContext),state=_useContext2.state;var reviews=state.reviews;var users=state.users;var _useState=useState({id:\"\",first_name:\"\",last_name:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];useEffect(function(){setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{id:user?user.id:\"\",first_name:user?user.first_name:\"\",last_name:user?user.last_name:\"\",email:user?user.email:\"\"});});},[user]);var coffeeReviews=getUserReviews(Object.values(reviews),values.id).sort(function(a,b){return new Date(b.created_at)-new Date(a.created_at);});var slicedReviews=coffeeReviews.sort(function(a,b){return new Date(b.created_at)-new Date(a.created_at);}).slice(0,limit);// Create Review List Item\nvar reviewList=slicedReviews.map(function(review){return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.reviewItemSection,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:12,md:12,lg:2,style:{display:\"flex\",justifyContent:\"center\",width:\"100%\"},children:/*#__PURE__*/_jsx(Link,{href:\"/coffees/\".concat(review.coffee_id),children:/*#__PURE__*/_jsx(\"img\",{class:classes.media,style:{objectFit:\"cover\"},src:state.coffees[review.coffee_id].image_url,alt:\"\".concat(coffee[review.id].name)})})}),/*#__PURE__*/_jsx(Grid,{item:true,md:12,lg:10,className:classes.reviewCard,children:/*#__PURE__*/_jsx(ReviewListItem,{review:review,reviewUser:users[review.user_id],coffee:state.coffees[review.coffee_id]},review.id)})]});});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:reviewList}),limit?/*#__PURE__*/_jsx(Button,{className:classes.seeMoreBtn,href:\"/account/reviews\",variant:\"contained\",color:\"primary\",disableElevation:true,children:\"SEE MORE\"}):null]});}export default AccountReviews;","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/components/my-account/AccountReviews.jsx"],"names":["useState","useContext","useEffect","UserContext","ReviewListItem","DataContext","getUserReviews","Grid","Link","Button","AccountReviews","props","coffee","classes","limit","user","state","reviews","users","id","first_name","last_name","email","values","setValues","prev","coffeeReviews","Object","sort","a","b","Date","created_at","slicedReviews","slice","reviewList","map","review","reviewItemSection","display","justifyContent","width","coffee_id","media","objectFit","coffees","image_url","name","reviewCard","user_id","seeMoreBtn"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport UserContext from \"../../contexts/UserContext\";\nimport ReviewListItem from \"../coffee-id/ReviewListItem\";\nimport DataContext from \"../../contexts/DataContext\";\nimport { getUserReviews } from \"../../helpers/selectors\";\nimport { Grid, Link, Button } from \"@material-ui/core\";\n\nfunction AccountReviews(props) {\n  const { coffee, classes, limit } = props;\n  const { user } = useContext(UserContext);\n  const { state } = useContext(DataContext);\n  const reviews = state.reviews;\n  const users = state.users;\n  const [values, setValues] = useState({\n    id: \"\",\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n  });\n\n  useEffect(() => {\n    setValues((prev) => ({\n      ...prev,\n      id: user ? user.id : \"\",\n      first_name: user ? user.first_name : \"\",\n      last_name: user ? user.last_name : \"\",\n      email: user ? user.email : \"\",\n    }));\n  }, [user]);\n\n  const coffeeReviews = getUserReviews(Object.values(reviews), values.id).sort(\n    (a, b) => {\n      return new Date(b.created_at) - new Date(a.created_at);\n    }\n  );\n  const slicedReviews = coffeeReviews\n    .sort((a, b) => {\n      return new Date(b.created_at) - new Date(a.created_at);\n    })\n    .slice(0, limit);\n\n  // Create Review List Item\n  const reviewList = slicedReviews.map((review) => {\n    return (\n      <Grid container className={classes.reviewItemSection}>\n        <Grid\n          item\n          sm={12}\n          md={12}\n          lg={2}\n          style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}\n        >\n          <Link href={`/coffees/${review.coffee_id}`}>\n            <img\n              class={classes.media}\n              style={{ objectFit: \"cover\" }}\n              src={state.coffees[review.coffee_id].image_url}\n              alt={`${coffee[review.id].name}`}\n            />\n          </Link>\n        </Grid>\n        <Grid item md={12} lg={10} className={classes.reviewCard}>\n          <ReviewListItem\n            key={review.id}\n            review={review}\n            reviewUser={users[review.user_id]}\n            coffee={state.coffees[review.coffee_id]}\n          />\n        </Grid>\n      </Grid>\n    );\n  });\n\n  return (\n    <div>\n      <div>{reviewList}</div>\n      {limit ? (\n        <Button\n          className={classes.seeMoreBtn}\n          href=\"/account/reviews\"\n          variant=\"contained\"\n          color=\"primary\"\n          disableElevation\n        >\n          SEE MORE\n        </Button>\n      ) : null}\n    </div>\n  );\n}\n\nexport default AccountReviews;\n"]},"metadata":{},"sourceType":"module"}