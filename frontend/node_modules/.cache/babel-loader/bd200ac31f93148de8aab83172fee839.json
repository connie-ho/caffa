{"ast":null,"code":"import _slicedToArray from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useContext,useEffect}from\"react\";import FavouriteContext from\"../../contexts/FavouriteContext\";import UserContext from\"../../contexts/UserContext\";import IconButton from\"@material-ui/core/IconButton\";import LocationOnIcon from\"@material-ui/icons/LocationOn\";import FavoriteBorderIcon from\"@material-ui/icons/FavoriteBorder\";import FavoriteIcon from\"@material-ui/icons/Favorite\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{calcFavourites}from\"../../helpers/selectors\";import bean from\"../../images/31080.png\";import classes from\"./Coffee.module.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Details(props){var coffee=props.coffee,reviews=props.reviews,favourites=props.favourites,isLiked=props.isLiked;// user logic\nvar _useContext=useContext(UserContext),user=_useContext.user,setOpenLogin=_useContext.setOpenLogin;var userId=user?user.id:null;// add/delete favourites logic\nvar _useContext2=useContext(FavouriteContext),addFavourite=_useContext2.addFavourite,deleteFavourite=_useContext2.deleteFavourite;var _useState=useState(isLiked(favourites,userId)),_useState2=_slicedToArray(_useState,2),fav=_useState2[0],setFav=_useState2[1];useEffect(function(){setFav(function(prev){return isLiked(favourites,userId);});},[favourites,userId,isLiked]);var numFav=calcFavourites(favourites);var onClickHandler=function onClickHandler(e){e.preventDefault();if(!user){setOpenLogin(function(prev){return true;});return;}if(fav){deleteFavourite(fav);setFav(function(prev){return false;});}else{addFavourite(coffee.id,user.id).then(function(res){setFav(function(prev){return res;});});}return false;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes[\"coffee-details-wrapper\"],children:/*#__PURE__*/_jsxs(\"div\",{className:classes[\"coffee-details-section\"],children:[/*#__PURE__*/_jsx(\"img\",{src:coffee.image_url,alt:\"\".concat(coffee.name),className:classes[\"coffee-details-img\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:classes[\"coffee-details-brand\"],children:coffee.brand}),/*#__PURE__*/_jsx(\"h1\",{className:classes[\"coffee-details-name\"],children:coffee.name}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"coffee-details-region\"],children:[/*#__PURE__*/_jsx(LocationOnIcon,{}),/*#__PURE__*/_jsx(\"h3\",{children:coffee.region})]}),!coffee.avg_rating&&\"No Reviews Yet!\",coffee.avg_rating&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:classes[\"coffee-details-rating\"],children:[/*#__PURE__*/_jsxs(\"h1\",{children:[coffee.avg_rating,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:bean,style:{height:\"15px\",width:\"15px\"},alt:\"bean\"}),/*#__PURE__*/_jsxs(\"p\",{children:[reviews.length,\" \",reviews.length===1?\"Rating\":\"Ratings\",\" \"]})]})]})}),/*#__PURE__*/_jsx(\"p\",{className:classes[\"coffee-details-description\"],children:coffee.description}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(IconButton,{type:\"submit\",\"aria-label\":\"delete\",onClick:onClickHandler,children:[fav&&/*#__PURE__*/_jsx(FavoriteIcon,{className:classes[\"coffee-like-icon\"]}),!fav&&/*#__PURE__*/_jsx(FavoriteBorderIcon,{className:classes[\"coffee-unlike-icon\"]})]}),numFav,\" \",numFav===1?\"like\":\"likes\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"coffee-characteristic-section\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:classes[\"characteristic\"],children:[/*#__PURE__*/_jsx(\"p\",{children:\"Roast\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:classes.icon,icon:\"fire\"}),coffee.roast]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"characteristic\"],children:[/*#__PURE__*/_jsx(\"p\",{children:\"Acidity\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:classes[\"icon\"],icon:\"flask\"}),coffee.acidity]}),/*#__PURE__*/_jsxs(\"div\",{className:classes[\"characteristic\"],children:[/*#__PURE__*/_jsx(\"p\",{children:\"Grain\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{className:classes[\"icon\"],icon:\"dna\"}),coffee.grain_species]})]})]});}","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/components/coffee-id/Details.jsx"],"names":["useState","useContext","useEffect","FavouriteContext","UserContext","IconButton","LocationOnIcon","FavoriteBorderIcon","FavoriteIcon","FontAwesomeIcon","calcFavourites","bean","classes","Details","props","coffee","reviews","favourites","isLiked","user","setOpenLogin","userId","id","addFavourite","deleteFavourite","fav","setFav","prev","numFav","onClickHandler","e","preventDefault","then","res","image_url","name","brand","region","avg_rating","height","width","length","description","icon","roast","acidity","grain_species"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from \"react\";\n\nimport FavouriteContext from \"../../contexts/FavouriteContext\";\nimport UserContext from \"../../contexts/UserContext\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport LocationOnIcon from \"@material-ui/icons/LocationOn\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { calcFavourites } from \"../../helpers/selectors\";\n\nimport bean from \"../../images/31080.png\";\nimport classes from \"./Coffee.module.scss\";\n\nexport default function Details(props) {\n  const { coffee, reviews, favourites, isLiked } = props;\n\n  // user logic\n  const { user, setOpenLogin } = useContext(UserContext);\n  const userId = user ? user.id : null;\n\n  // add/delete favourites logic\n  const { addFavourite, deleteFavourite } = useContext(FavouriteContext);\n\n  const [fav, setFav] = useState(isLiked(favourites, userId));\n\n  useEffect(() => {\n    setFav((prev) => isLiked(favourites, userId));\n  }, [favourites, userId, isLiked]);\n\n  const numFav = calcFavourites(favourites);\n\n  const onClickHandler = (e) => {\n    e.preventDefault();\n\n    if (!user) {\n      setOpenLogin((prev) => true);\n      return;\n    }\n\n    if (fav) {\n      deleteFavourite(fav);\n      setFav((prev) => false);\n    } else {\n      addFavourite(coffee.id, user.id).then((res) => {\n        setFav((prev) => res);\n      });\n    }\n\n    return false;\n  };\n\n  return (\n    <>\n      <div className={classes[\"coffee-details-wrapper\"]}>\n        <div className={classes[\"coffee-details-section\"]}>\n          <img\n            src={coffee.image_url}\n            alt={`${coffee.name}`}\n            className={classes[\"coffee-details-img\"]}\n          />\n          <div>\n            <h2 className={classes[\"coffee-details-brand\"]}>{coffee.brand}</h2>\n            <h1 className={classes[\"coffee-details-name\"]}>{coffee.name}</h1>\n            <div className={classes[\"coffee-details-region\"]}>\n              <LocationOnIcon />\n              <h3>{coffee.region}</h3>\n            </div>\n            {!coffee.avg_rating && \"No Reviews Yet!\"}\n            {coffee.avg_rating && (\n              <>\n                <div className={classes[\"coffee-details-rating\"]}>\n                  <h1>{coffee.avg_rating} </h1>\n                  <div>\n                    <img\n                      src={bean}\n                      style={{ height: \"15px\", width: \"15px\" }}\n                      alt=\"bean\"\n                    />\n                    <p>\n                      {reviews.length}{\" \"}\n                      {reviews.length === 1 ? \"Rating\" : \"Ratings\"}{\" \"}\n                    </p>\n                  </div>\n                </div>\n              </>\n            )}\n            <p className={classes[\"coffee-details-description\"]}>\n              {coffee.description}\n            </p>\n            <div>\n              <IconButton\n                type=\"submit\"\n                aria-label=\"delete\"\n                onClick={onClickHandler}\n              >\n                {fav && (\n                  <FavoriteIcon className={classes[\"coffee-like-icon\"]} />\n                )}\n                {!fav && (\n                  <FavoriteBorderIcon\n                    className={classes[\"coffee-unlike-icon\"]}\n                  />\n                )}\n              </IconButton>\n              {numFav} {numFav === 1 ? \"like\" : \"likes\"}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className={classes[\"coffee-characteristic-section\"]}>\n        <div className={classes[\"characteristic\"]}>\n          <p>Roast</p>\n          <FontAwesomeIcon className={classes.icon} icon=\"fire\" />\n          {coffee.roast}\n        </div>\n        <div className={classes[\"characteristic\"]}>\n          <p>Acidity</p>\n          <FontAwesomeIcon className={classes[\"icon\"]} icon=\"flask\" />\n          {coffee.acidity}\n        </div>\n        <div className={classes[\"characteristic\"]}>\n          <p>Grain</p>\n          <FontAwesomeIcon className={classes[\"icon\"]} icon=\"dna\" />\n          {coffee.grain_species}\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}