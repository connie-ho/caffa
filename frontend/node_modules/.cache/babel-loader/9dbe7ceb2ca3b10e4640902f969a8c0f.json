{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";/// returns array of reviews for that coffee\nexport function getReviewsForCoffee(reviews,coffeeId){var res=[];var _iterator=_createForOfIteratorHelper(reviews),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var review=_step.value;if(review&&Number(review.coffee_id)===Number(coffeeId)){res.push(review);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return res;}// returns array of reviews for that coffee\nexport function getUserReviews(reviews,userId){var res=[];var _iterator2=_createForOfIteratorHelper(reviews),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var review=_step2.value;if(review&&Number(review.user_id)===Number(userId)){res.push(review);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return res;}// returns avg rating of coffee\nexport function avgRatingForCoffee(coffeeReviews){if(!coffeeReviews.length){return;}if(coffeeReviews.length===1){return Number(coffeeReviews[0].rating);}var sum=0;var _iterator3=_createForOfIteratorHelper(coffeeReviews),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var review=_step3.value;sum+=Number(review.rating);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return Math.round(sum/coffeeReviews.length*10)/10;}// returns array of favourites for that coffee\nexport function getFavouritesForCoffee(favourites,coffeeId){var res=[];var _iterator4=_createForOfIteratorHelper(favourites),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var fav=_step4.value;if(fav&&Number(fav.coffee_id)===Number(coffeeId)){res.push(fav);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return res;}// returns array of favourites for that user\nexport function getFavouritesForUser(favourites,userId){var res=[];var _iterator5=_createForOfIteratorHelper(favourites),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var fav=_step5.value;if(fav&&Number(fav.user_id)===Number(userId)){res.push(fav);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return res;}// returns the fav id if the coffee is already liked otherwise null;\n// pass in the filtered favourites array for that coffee\nexport function isLiked(favourites,userId){var _iterator6=_createForOfIteratorHelper(favourites),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var fav=_step6.value;if(fav.user_id===userId)return fav.id;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return null;}// pass in filtered favourites array for that coffee\nexport function calcFavourites(favourites){var num=0;var _iterator7=_createForOfIteratorHelper(favourites),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var fav=_step7.value;if(fav){num+=1;}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return num;}// pass in filtered reviews array for that coffee\nexport function isReviewed(reviews,userId){if(!userId){return false;}var _iterator8=_createForOfIteratorHelper(reviews),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var review=_step8.value;if(Number(review.user_id)===Number(userId)){return true;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return false;}// get values of coffee characteristics in all items\nexport function charValues(characteristics){var res={};var _iterator9=_createForOfIteratorHelper(characteristics),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var char=_step9.value;res[char]=char;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}// get filtered coffees\n// filterCategories are all the possible categories the user can use to filter\n// filterObj are all the filters the user has chosen\nexport function getFilteredCoffees(allCoffees,filterCategories,filterObj){var res=[];if(!hasSelectedFilters(filterObj)){return allCoffees;}if(!allCoffees.length){return res;}// category are things like region, acidity, roast etc ...\nfor(var category in filterObj){if(!filterObj[category]||!filterObj[category].length){continue;}var _iterator10=_createForOfIteratorHelper(allCoffees),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var coffee=_step10.value;// item is a number that maps to the items in filtercategories\nvar _iterator11=_createForOfIteratorHelper(filterObj[category]),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var item=_step11.value;if(coffee[category]===filterCategories[category][\"items\"][item][\"type\"]){// works if the coffee is in the same category\nres.push(coffee);}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}// make that category null so that the next iteration skips it\n}catch(err){_iterator10.e(err);}finally{_iterator10.f();}filterObj[category]=[];return getFilteredCoffees(res,filterCategories,filterObj);}}// checks if there are any filters selected\nexport function hasSelectedFilters(filters){for(var _i=0,_Object$values=Object.values(filters);_i<_Object$values.length;_i++){var filter=_Object$values[_i];if(filter.length){return true;}}return false;}export function getRegions(coffees){var res={};var _iterator12=_createForOfIteratorHelper(coffees),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var coffee=_step12.value;res[coffee.region]=coffee.region;}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}return Object.values(res);}// format regions so that it is filterable\nexport function formatRegions(regions,i){var res={};var currIndex=i;var _iterator13=_createForOfIteratorHelper(regions),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var region=_step13.value;res[currIndex]={id:currIndex,type:region};currIndex+=1;}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}return res;}// Get coffee review images by matching id\nexport function getReviewedCoffee(reviews,coffees){var res=[];for(var rItem in reviews){for(var cItem in coffees){if(reviews[rItem].coffee_id===coffees[cItem].id){res.push(coffees[cItem]);}}}return res;}// Get coffee list based on user favourites\nexport function userFavCoffees(favourites,coffees){var res=[];var _iterator14=_createForOfIteratorHelper(favourites),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var fave=_step14.value;res.push(coffees[fave.coffee_id]);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return res;}","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/helpers/selectors.js"],"names":["getReviewsForCoffee","reviews","coffeeId","res","review","Number","coffee_id","push","getUserReviews","userId","user_id","avgRatingForCoffee","coffeeReviews","length","rating","sum","Math","round","getFavouritesForCoffee","favourites","fav","getFavouritesForUser","isLiked","id","calcFavourites","num","isReviewed","charValues","characteristics","char","getFilteredCoffees","allCoffees","filterCategories","filterObj","hasSelectedFilters","category","coffee","item","filters","Object","values","filter","getRegions","coffees","region","formatRegions","regions","i","currIndex","type","getReviewedCoffee","rItem","cItem","userFavCoffees","fave"],"mappings":"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","sourcesContent":["/// returns array of reviews for that coffee\nexport function getReviewsForCoffee(reviews, coffeeId) {\n  const res = [];\n\n  for (const review of reviews) {\n    if (review && Number(review.coffee_id) === Number(coffeeId)) {\n      res.push(review);\n    }\n  }\n  return res;\n}\n\n// returns array of reviews for that coffee\nexport function getUserReviews(reviews, userId) {\n  const res = [];\n\n  for (const review of reviews) {\n    if (review && Number(review.user_id) === Number(userId)) {\n      res.push(review);\n    }\n  }\n  return res;\n}\n\n// returns avg rating of coffee\nexport function avgRatingForCoffee(coffeeReviews) {\n  if (!coffeeReviews.length) {\n    return;\n  }\n\n  if (coffeeReviews.length === 1) {\n    return Number(coffeeReviews[0].rating);\n  }\n\n  let sum = 0;\n\n  for (const review of coffeeReviews) {\n    sum += Number(review.rating);\n  }\n\n  return Math.round((sum / coffeeReviews.length) * 10) / 10;\n}\n\n// returns array of favourites for that coffee\nexport function getFavouritesForCoffee(favourites, coffeeId) {\n  const res = [];\n\n  for (const fav of favourites) {\n    if (fav && Number(fav.coffee_id) === Number(coffeeId)) {\n      res.push(fav);\n    }\n  }\n  return res;\n}\n\n// returns array of favourites for that user\nexport function getFavouritesForUser(favourites, userId) {\n  const res = [];\n\n  for (const fav of favourites) {\n    if (fav && Number(fav.user_id) === Number(userId)) {\n      res.push(fav);\n    }\n  }\n  return res;\n}\n\n// returns the fav id if the coffee is already liked otherwise null;\n// pass in the filtered favourites array for that coffee\nexport function isLiked(favourites, userId) {\n  for (const fav of favourites) {\n    if (fav.user_id === userId) return fav.id;\n  }\n\n  return null;\n}\n\n// pass in filtered favourites array for that coffee\nexport function calcFavourites(favourites) {\n  let num = 0;\n\n  for (const fav of favourites) {\n    if (fav) {\n      num += 1;\n    }\n  }\n  return num;\n}\n\n// pass in filtered reviews array for that coffee\nexport function isReviewed(reviews, userId) {\n  if (!userId) {\n    return false;\n  }\n\n  for (const review of reviews) {\n    if (Number(review.user_id) === Number(userId)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// get values of coffee characteristics in all items\nexport function charValues(characteristics) {\n  const res = {};\n\n  for (const char of characteristics) {\n    res[char] = char;\n  }\n}\n\n// get filtered coffees\n// filterCategories are all the possible categories the user can use to filter\n// filterObj are all the filters the user has chosen\nexport function getFilteredCoffees(allCoffees, filterCategories, filterObj) {\n  const res = [];\n\n  if (!hasSelectedFilters(filterObj)) {\n    return allCoffees;\n  }\n\n  if (!allCoffees.length) {\n    return res;\n  }\n\n  // category are things like region, acidity, roast etc ...\n  for (const category in filterObj) {\n    if (!filterObj[category] || !filterObj[category].length) {\n      continue;\n    }\n    for (const coffee of allCoffees) {\n      // item is a number that maps to the items in filtercategories\n\n      for (const item of filterObj[category]) {\n        if (\n          coffee[category] === filterCategories[category][\"items\"][item][\"type\"]\n        ) {\n          // works if the coffee is in the same category\n          res.push(coffee);\n        }\n      }\n    }\n    // make that category null so that the next iteration skips it\n    filterObj[category] = [];\n    return getFilteredCoffees(res, filterCategories, filterObj);\n  }\n}\n\n// checks if there are any filters selected\nexport function hasSelectedFilters(filters) {\n  for (const filter of Object.values(filters)) {\n    if (filter.length) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function getRegions(coffees) {\n  const res = {};\n\n  for (const coffee of coffees) {\n    res[coffee.region] = coffee.region;\n  }\n\n  return Object.values(res);\n}\n\n// format regions so that it is filterable\nexport function formatRegions(regions, i) {\n  const res = {};\n\n  let currIndex = i;\n  for (const region of regions) {\n    res[currIndex] = {\n      id: currIndex,\n      type: region,\n    };\n    currIndex += 1;\n  }\n\n  return res;\n}\n\n// Get coffee review images by matching id\nexport function getReviewedCoffee(reviews, coffees) {\n  const res = [];\n\n  for (const rItem in reviews) {\n    for (const cItem in coffees) {\n      if (reviews[rItem].coffee_id === coffees[cItem].id) {\n        res.push(coffees[cItem]);\n      }\n    }\n  }\n  return res;\n}\n\n// Get coffee list based on user favourites\nexport function userFavCoffees(favourites, coffees) {\n  const res = [];\n\n  for (const fave of favourites) {\n    res.push(coffees[fave.coffee_id]);\n  }\n  return res;\n}\n"]},"metadata":{},"sourceType":"module"}