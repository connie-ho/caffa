{"ast":null,"code":"import _slicedToArray from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useContext}from\"react\";import ReviewForm from\"./ReviewForm\";import Stars from\"./Stars\";import ReviewContext from\"../../contexts/ReviewContext\";import UserContext from\"../../contexts/UserContext\";import{makeStyles}from\"@material-ui/core/styles\";import Card from\"@material-ui/core/Card\";import CardContent from\"@material-ui/core/CardContent\";// import classes from './Coffee.module.scss';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:_defineProperty({height:200,padding:\"2em\",flex:1,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",border:\"0px solid\",borderRadius:\"1rem\",backgroundColor:theme.palette.background.secondary,\"&:hover\":{transform:\"scale3d(1.05, 1.05, 1)\",background:\"#e0d4a7\"}},theme.breakpoints.down(\"sm\"),{margin:\"0 0 1em 0\"})};});export default function AddReview(props){var coffee=props.coffee,openReviewForm=props.openReviewForm,setOpenReviewForm=props.setOpenReviewForm;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useContext=useContext(ReviewContext),addReview=_useContext.addReview;// user logic\nvar _useContext2=useContext(UserContext),user=_useContext2.user,setOpenLogin=_useContext2.setOpenLogin;var handleClickOpenReviewForm=function handleClickOpenReviewForm(){if(!user){setOpenLogin(function(prev){return true;});return;}if(openReviewForm){setRating(function(prev){return rating;});}else{setOpenReviewForm(true);}};var handleCloseReviewForm=function handleCloseReviewForm(){setOpenReviewForm(false);setRating(0);};var handleAddReview=function handleAddReview(){addReview({rating:rating,description:description,user_id:user.id,coffee_id:coffee.id}).then(function(){handleCloseReviewForm();});};var classes=useStyles();return/*#__PURE__*/_jsx(Card,{className:classes.root,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"How did you like this Coffee?\"}),/*#__PURE__*/_jsx(Stars,{rating:rating,setRating:setRating,handleStarClick:handleClickOpenReviewForm}),/*#__PURE__*/_jsx(ReviewForm,{coffee:coffee,rating:rating,setRating:setRating,openReviewForm:openReviewForm,setOpenReviewForm:setOpenReviewForm,description:description,setDescription:setDescription,handleClickOpenReviewForm:handleClickOpenReviewForm,handleCloseReviewForm:handleCloseReviewForm,handleSubmitReviewForm:handleAddReview,handStarClick:setRating})]})});}","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/components/coffee-id/AddReview.jsx"],"names":["React","useState","useContext","ReviewForm","Stars","ReviewContext","UserContext","makeStyles","Card","CardContent","useStyles","theme","root","height","padding","flex","display","justifyContent","alignItems","border","borderRadius","backgroundColor","palette","background","secondary","transform","breakpoints","down","margin","AddReview","props","coffee","openReviewForm","setOpenReviewForm","rating","setRating","description","setDescription","addReview","user","setOpenLogin","handleClickOpenReviewForm","prev","handleCloseReviewForm","handleAddReview","user_id","id","coffee_id","then","classes"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport ReviewForm from \"./ReviewForm\";\nimport Stars from \"./Stars\";\nimport ReviewContext from \"../../contexts/ReviewContext\";\nimport UserContext from \"../../contexts/UserContext\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\n\n// import classes from './Coffee.module.scss';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: 200,\n    padding: \"2em\",\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    border: \"0px solid\",\n    borderRadius: \"1rem\",\n    backgroundColor: theme.palette.background.secondary,\n    \"&:hover\": {\n      transform: \"scale3d(1.05, 1.05, 1)\",\n      background: \"#e0d4a7\",\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n      margin: \"0 0 1em 0\",\n    },\n  },\n}));\n\nexport default function AddReview(props) {\n  const { coffee, openReviewForm, setOpenReviewForm } = props;\n\n  const [rating, setRating] = useState(0);\n  const [description, setDescription] = useState(\"\");\n  const { addReview } = useContext(ReviewContext);\n\n  // user logic\n  const { user, setOpenLogin } = useContext(UserContext);\n\n  const handleClickOpenReviewForm = () => {\n    if (!user) {\n      setOpenLogin((prev) => true);\n      return;\n    }\n\n    if (openReviewForm) {\n      setRating((prev) => rating);\n    } else {\n      setOpenReviewForm(true);\n    }\n  };\n\n  const handleCloseReviewForm = () => {\n    setOpenReviewForm(false);\n    setRating(0);\n  };\n\n  const handleAddReview = () => {\n    addReview({\n      rating,\n      description,\n      user_id: user.id,\n      coffee_id: coffee.id,\n    }).then(() => {\n      handleCloseReviewForm();\n    });\n  };\n\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <h3>How did you like this Coffee?</h3>\n        <Stars\n          rating={rating}\n          setRating={setRating}\n          handleStarClick={handleClickOpenReviewForm}\n        />\n        <ReviewForm\n          coffee={coffee}\n          rating={rating}\n          setRating={setRating}\n          openReviewForm={openReviewForm}\n          setOpenReviewForm={setOpenReviewForm}\n          description={description}\n          setDescription={setDescription}\n          handleClickOpenReviewForm={handleClickOpenReviewForm}\n          handleCloseReviewForm={handleCloseReviewForm}\n          handleSubmitReviewForm={handleAddReview}\n          handStarClick={setRating}\n        />\n      </CardContent>\n    </Card>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}