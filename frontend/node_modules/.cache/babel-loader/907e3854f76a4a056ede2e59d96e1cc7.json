{"ast":null,"code":"import _slicedToArray from\"/home/kevin/lighthouse/caffa-deploy/caffa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Main from\"./components/Main\";import NotLoggedIn from\"./components/NotLoggedIn\";import axios from\"axios\";import\"./App.css\";import{BrowserRouter as Router}from\"react-router-dom\";import DataContext from\"./contexts/DataContext\";import UserContext from\"./contexts/UserContext\";import useApplicationData from\"./hooks/useApplicationData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// user logic\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// const [homeCoffees, setHomeCoffees] = useState(null);\n// allows us to enable the modal and close anywhere in the app\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openLogin=_useState4[0],setOpenLogin=_useState4[1];var handleLoginClose=function handleLoginClose(){setOpenLogin(false);};useEffect(function(){axios.post(\"/api/users/authenticate\").then(function(res){return setUser(res.data);}).catch(function(res){console.log(\"there was an error authenticating\");});},[]);var loginHandler=function loginHandler(email,password){return axios.post(\"/api/users/login\",{email:email,password:password}).then(function(res){setUser(res.data);}).catch(function(err){console.error(err.message);});};var editUserHandler=function editUserHandler(first_name,last_name,email){return axios.post(\"/api/users/edit\",{first_name:first_name,last_name:last_name,email:email}).catch(function(err){console.error(err.message);});};var registerHandler=function registerHandler(firstName,lastName,email,password){return axios.post(\"/api/users/register\",{first_name:firstName,last_name:lastName,email:email,password:password}).then(function(res){setUser(res.data);return\"ok\";}).catch(function(err){return\"bad\";});};var logoutHandler=function logoutHandler(){axios.post(\"/api/users/logout\").then(function(res){return setUser(res.data);});};var _useApplicationData=useApplicationData(),state=_useApplicationData.state,addFavourite=_useApplicationData.addFavourite,deleteFavourite=_useApplicationData.deleteFavourite,addReview=_useApplicationData.addReview,editReview=_useApplicationData.editReview,deleteReview=_useApplicationData.deleteReview,addCoffee=_useApplicationData.addCoffee;return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(UserContext.Provider,{value:{user:user,loginHandler:loginHandler,openLogin:openLogin,setOpenLogin:setOpenLogin,registerHandler:registerHandler,editUserHandler:editUserHandler},children:[/*#__PURE__*/_jsx(NotLoggedIn,{handleLoginClose:handleLoginClose}),/*#__PURE__*/_jsx(DataContext.Provider,{value:{state:state},children:/*#__PURE__*/_jsx(Main,{addFavourite:addFavourite,deleteFavourite:deleteFavourite,addReview:addReview,editReview:editReview,deleteReview:deleteReview,addCoffee:addCoffee,loginHandler:loginHandler,logoutHandler:logoutHandler,editUserHandler:editUserHandler,user:user,setUser:setUser})})]})})});}export default App;","map":{"version":3,"sources":["/home/kevin/lighthouse/caffa-deploy/caffa/frontend/src/App.jsx"],"names":["React","useEffect","useState","Main","NotLoggedIn","axios","BrowserRouter","Router","DataContext","UserContext","useApplicationData","App","user","setUser","openLogin","setOpenLogin","handleLoginClose","post","then","res","data","catch","console","log","loginHandler","email","password","err","error","message","editUserHandler","first_name","last_name","registerHandler","firstName","lastName","logoutHandler","state","addFavourite","deleteFavourite","addReview","editReview","deleteReview","addCoffee"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,KAAwC,kBAAxC,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CAEA,MAAOC,CAAAA,kBAAP,KAA+B,4BAA/B,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb;AADa,cAEWT,QAAQ,CAAC,IAAD,CAFnB,wCAENU,IAFM,eAEAC,OAFA,eAGb;AAEA;AALa,eAMqBX,QAAQ,CAAC,KAAD,CAN7B,yCAMNY,SANM,eAMKC,YANL,eAOb,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BD,YAAY,CAAC,KAAD,CAAZ,CACD,CAFD,CAIAd,SAAS,CAAC,UAAM,CACdI,KAAK,CACFY,IADH,CACQ,yBADR,EAEGC,IAFH,CAEQ,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACM,GAAG,CAACC,IAAL,CAAhB,EAFR,EAGGC,KAHH,CAGS,SAACF,GAAD,CAAS,CACdG,OAAO,CAACC,GAAR,CAAY,mCAAZ,EACD,CALH,EAMD,CAPQ,CAON,EAPM,CAAT,CASA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAQC,QAAR,CAAqB,CACxC,MAAOrB,CAAAA,KAAK,CACTY,IADI,CACC,kBADD,CACqB,CAAEQ,KAAK,CAAEA,KAAT,CAAgBC,QAAQ,CAAEA,QAA1B,CADrB,EAEJR,IAFI,CAEC,SAACC,GAAD,CAAS,CACbN,OAAO,CAACM,GAAG,CAACC,IAAL,CAAP,CACD,CAJI,EAKJC,KALI,CAKE,SAACM,GAAD,CAAS,CACdL,OAAO,CAACM,KAAR,CAAcD,GAAG,CAACE,OAAlB,EACD,CAPI,CAAP,CAQD,CATD,CAWA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,UAAD,CAAaC,SAAb,CAAwBP,KAAxB,CAAkC,CACxD,MAAOpB,CAAAA,KAAK,CACTY,IADI,CACC,iBADD,CACoB,CACvBc,UAAU,CAAEA,UADW,CAEvBC,SAAS,CAAEA,SAFY,CAGvBP,KAAK,CAAEA,KAHgB,CADpB,EAMJJ,KANI,CAME,SAACM,GAAD,CAAS,CACdL,OAAO,CAACM,KAAR,CAAcD,GAAG,CAACE,OAAlB,EACD,CARI,CAAP,CASD,CAVD,CAYA,GAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,SAAD,CAAYC,QAAZ,CAAsBV,KAAtB,CAA6BC,QAA7B,CAA0C,CAChE,MAAOrB,CAAAA,KAAK,CACTY,IADI,CACC,qBADD,CACwB,CAC3Bc,UAAU,CAAEG,SADe,CAE3BF,SAAS,CAAEG,QAFgB,CAG3BV,KAAK,CAAEA,KAHoB,CAI3BC,QAAQ,CAAEA,QAJiB,CADxB,EAOJR,IAPI,CAOC,SAACC,GAAD,CAAS,CACbN,OAAO,CAACM,GAAG,CAACC,IAAL,CAAP,CACA,MAAO,IAAP,CACD,CAVI,EAWJC,KAXI,CAWE,SAACM,GAAD,CAAS,CACd,MAAO,KAAP,CACD,CAbI,CAAP,CAcD,CAfD,CAiBA,GAAMS,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B/B,KAAK,CAACY,IAAN,CAAW,mBAAX,EAAgCC,IAAhC,CAAqC,SAACC,GAAD,QAASN,CAAAA,OAAO,CAACM,GAAG,CAACC,IAAL,CAAhB,EAArC,EACD,CAFD,CA5Da,wBAwETV,kBAAkB,EAxET,CAiEX2B,KAjEW,qBAiEXA,KAjEW,CAkEXC,YAlEW,qBAkEXA,YAlEW,CAmEXC,eAnEW,qBAmEXA,eAnEW,CAoEXC,SApEW,qBAoEXA,SApEW,CAqEXC,UArEW,qBAqEXA,UArEW,CAsEXC,YAtEW,qBAsEXA,YAtEW,CAuEXC,SAvEW,qBAuEXA,SAvEW,CA0Eb,mBACE,KAAC,MAAD,wBACE,YAAK,SAAS,CAAC,KAAf,uBACE,MAAC,WAAD,CAAa,QAAb,EACE,KAAK,CAAE,CACL/B,IAAI,CAAJA,IADK,CAELY,YAAY,CAAZA,YAFK,CAGLV,SAAS,CAATA,SAHK,CAILC,YAAY,CAAZA,YAJK,CAKLkB,eAAe,CAAfA,eALK,CAMLH,eAAe,CAAfA,eANK,CADT,wBAUE,KAAC,WAAD,EAAa,gBAAgB,CAAEd,gBAA/B,EAVF,cAWE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEqB,KAAK,CAALA,KAAF,CAA7B,uBACE,KAAC,IAAD,EACE,YAAY,CAAEC,YADhB,CAEE,eAAe,CAAEC,eAFnB,CAGE,SAAS,CAAEC,SAHb,CAIE,UAAU,CAAEC,UAJd,CAKE,YAAY,CAAEC,YALhB,CAME,SAAS,CAAEC,SANb,CAOE,YAAY,CAAEnB,YAPhB,CAQE,aAAa,CAAEY,aARjB,CASE,eAAe,CAAEN,eATnB,CAUE,IAAI,CAAElB,IAVR,CAWE,OAAO,CAAEC,OAXX,EADF,EAXF,GADF,EADF,EADF,CAiCD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Main from \"./components/Main\";\nimport NotLoggedIn from \"./components/NotLoggedIn\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport DataContext from \"./contexts/DataContext\";\nimport UserContext from \"./contexts/UserContext\";\n\nimport useApplicationData from \"./hooks/useApplicationData\";\n\nfunction App() {\n  // user logic\n  const [user, setUser] = useState(null);\n  // const [homeCoffees, setHomeCoffees] = useState(null);\n\n  // allows us to enable the modal and close anywhere in the app\n  const [openLogin, setOpenLogin] = useState(false);\n  const handleLoginClose = () => {\n    setOpenLogin(false);\n  };\n\n  useEffect(() => {\n    axios\n      .post(\"/api/users/authenticate\")\n      .then((res) => setUser(res.data))\n      .catch((res) => {\n        console.log(\"there was an error authenticating\");\n      });\n  }, []);\n\n  const loginHandler = (email, password) => {\n    return axios\n      .post(\"/api/users/login\", { email: email, password: password })\n      .then((res) => {\n        setUser(res.data);\n      })\n      .catch((err) => {\n        console.error(err.message);\n      });\n  };\n\n  const editUserHandler = (first_name, last_name, email) => {\n    return axios\n      .post(\"/api/users/edit\", {\n        first_name: first_name,\n        last_name: last_name,\n        email: email,\n      })\n      .catch((err) => {\n        console.error(err.message);\n      });\n  };\n\n  const registerHandler = (firstName, lastName, email, password) => {\n    return axios\n      .post(\"/api/users/register\", {\n        first_name: firstName,\n        last_name: lastName,\n        email: email,\n        password: password,\n      })\n      .then((res) => {\n        setUser(res.data);\n        return \"ok\";\n      })\n      .catch((err) => {\n        return \"bad\";\n      });\n  };\n\n  const logoutHandler = () => {\n    axios.post(\"/api/users/logout\").then((res) => setUser(res.data));\n  };\n\n  const {\n    state,\n    addFavourite,\n    deleteFavourite,\n    addReview,\n    editReview,\n    deleteReview,\n    addCoffee,\n  } = useApplicationData();\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <UserContext.Provider\n          value={{\n            user,\n            loginHandler,\n            openLogin,\n            setOpenLogin,\n            registerHandler,\n            editUserHandler,\n          }}\n        >\n          <NotLoggedIn handleLoginClose={handleLoginClose} />\n          <DataContext.Provider value={{ state }}>\n            <Main\n              addFavourite={addFavourite}\n              deleteFavourite={deleteFavourite}\n              addReview={addReview}\n              editReview={editReview}\n              deleteReview={deleteReview}\n              addCoffee={addCoffee}\n              loginHandler={loginHandler}\n              logoutHandler={logoutHandler}\n              editUserHandler={editUserHandler}\n              user={user}\n              setUser={setUser}\n            />\n          </DataContext.Provider>\n        </UserContext.Provider>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}